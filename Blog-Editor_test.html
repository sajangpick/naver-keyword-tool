<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 블로그 생성기 - 사장픽</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .form-section {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
            font-size: 1rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .result-section {
            padding: 40px;
            display: none;
        }

        .result-section.show {
            display: block;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            margin: 0 5px;
            border-radius: 10px;
            font-weight: 600;
            color: #6c757d;
            transition: all 0.3s ease;
        }

        .step.active {
            background: #667eea;
            color: white;
        }

        .loading {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error {
            background: #f8d7da;
            color: #721c24;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .success {
            background: #d4edda;
            color: #155724;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .topic-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .topic-card:hover {
            border-color: #667eea;
            background: #f0f2ff;
            transform: translateY(-2px);
        }

        .topic-card h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .topic-card p {
            color: #666;
            margin-bottom: 10px;
            line-height: 1.5;
        }

        .topic-card .keywords {
            font-size: 0.9rem;
            color: #667eea;
            font-weight: 600;
        }

        .blog-content {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            line-height: 1.8;
            white-space: pre-wrap;
            font-size: 1rem;
        }

        .blog-content h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        /* 탭 스타일링 */
        .tab-navigation {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            margin: 20px 40px 0;
            padding: 5px;
        }

        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            color: #6c757d;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn:hover {
            background: #e9ecef;
            color: #495057;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI 블로그 생성기</h1>
            <p>가게 정보를 입력하면 AI가 블로그 주제와 글을 생성해드립니다</p>
        </div>

        <!-- 탭 네비게이션 -->
        <div class="tab-navigation">
            <button class="tab-btn active" data-tab="our-store">우리매장</button>
            <button class="tab-btn" data-tab="review-team">체험단리뷰</button>
            <button class="tab-btn" data-tab="visit-review">방문후기</button>
        </div>

        <div class="form-section">
            <!-- 우리매장 탭 -->
            <div class="tab-content active" id="our-store-tab">
            <form id="blogForm">
                <div class="form-group">
                    <label for="companyName">업체명 *</label>
                    <input 
                        type="text" 
                        id="companyName" 
                        name="companyName" 
                        required 
                        placeholder="예: 동흥안가"
                    />
                    <small style="color: #666; font-size: 12px;">가게의 정확한 상호명을 입력해주세요</small>
                </div>

                <div class="form-group">
                    <label for="companyAddress">업체주소 *</label>
                    <input 
                        type="text" 
                        id="companyAddress" 
                        name="companyAddress" 
                        required 
                        placeholder="예: 부산광역시 해운대구 우동 1394-84"
                    />
                    <small style="color: #666; font-size: 12px;">가게의 정확한 주소를 입력해주세요</small>
                </div>

                <div class="form-group">
                    <label for="businessHours">영업시간 *</label>
                    <input 
                        type="text" 
                        id="businessHours" 
                        name="businessHours" 
                        required 
                        placeholder="예: 11:30-22:00 (매일, 15:00-17:00 브레이크타임)"
                    />
                    <small style="color: #666; font-size: 12px;">영업시간과 휴무일을 입력해주세요</small>
                </div>

                <div class="form-group">
                    <label for="mainMenu">대표메뉴 *</label>
                    <textarea 
                        id="mainMenu" 
                        name="mainMenu" 
                        required 
                        placeholder="예: 삼겹살, 목살, 갈비"
                    ></textarea>
                    <small style="color: #666; font-size: 12px;">가게의 대표 메뉴들을 입력해주세요 (쉼표로 구분)</small>
                </div>

                <div class="form-group">
                    <label for="landmarks">주변 랜드마크</label>
                    <input 
                        type="text" 
                        id="landmarks" 
                        name="landmarks" 
                        placeholder="예: 해운대해수욕장, 센텀시티, 해운대역"
                    />
                    <small style="color: #666; font-size: 12px;">주변 유명한 장소나 랜드마크를 입력해주세요 (쉼표로 구분)</small>
                </div>

                <div class="form-group">
                    <label for="keywords">키워드</label>
                    <input 
                        type="text" 
                        id="keywords" 
                        name="keywords" 
                        placeholder="예: 30년전통, 신선한고기, 가족식당, 부산맛집"
                    />
                    <small style="color: #666; font-size: 12px;">가게의 특징이나 키워드를 입력해주세요 (쉼표로 구분)</small>
                </div>

                <button type="submit" class="btn" id="generateBtn">
                    블로그 생성하기
                </button>
            </form>
            </div>

            <!-- 체험단리뷰 탭 -->
            <div class="tab-content" id="review-team-tab">
                <form id="reviewTeamForm">
                    <div class="form-group">
                        <label for="companyName2">업체명 *</label>
                        <input 
                            type="text" 
                            id="companyName2" 
                            name="companyName" 
                            required 
                            placeholder="예: 동흥안가"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 정확한 상호명을 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="companyAddress2">업체주소 *</label>
                        <input 
                            type="text" 
                            id="companyAddress2" 
                            name="companyAddress" 
                            required 
                            placeholder="예: 부산광역시 해운대구 우동 1394-84"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 정확한 주소를 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="businessHours2">영업시간 *</label>
                        <input 
                            type="text" 
                            id="businessHours2" 
                            name="businessHours" 
                            required 
                            placeholder="예: 11:30-22:00 (매일, 15:00-17:00 브레이크타임)"
                        />
                        <small style="color: #666; font-size: 12px;">영업시간과 휴무일을 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="mainMenu2">대표메뉴 *</label>
                        <textarea 
                            id="mainMenu2" 
                            name="mainMenu" 
                            required 
                            placeholder="예: 삼겹살, 목살, 갈비"
                        ></textarea>
                        <small style="color: #666; font-size: 12px;">가게의 대표 메뉴들을 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="landmarks2">주변 랜드마크</label>
                        <input 
                            type="text" 
                            id="landmarks2" 
                            name="landmarks" 
                            placeholder="예: 해운대해수욕장, 센텀시티, 해운대역"
                        />
                        <small style="color: #666; font-size: 12px;">주변 유명한 장소나 랜드마크를 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="keywords2">키워드</label>
                        <input 
                            type="text" 
                            id="keywords2" 
                            name="keywords" 
                            placeholder="예: 30년전통, 신선한고기, 가족식당, 부산맛집"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 특징이나 키워드를 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="existingBlog2">기존 블로그 글 *</label>
                        <textarea 
                            id="existingBlog2" 
                            name="existingBlog" 
                            required 
                            placeholder="기존에 작성하신 블로그 글을 복사해서 붙여넣어주세요. 이 글의 스타일과 톤앤매너를 참고하여 새로운 체험단 리뷰를 작성합니다."
                        ></textarea>
                        <small style="color: #666; font-size: 12px;">기존 블로그 글의 스타일을 참고하여 체험단 리뷰 형태로 작성합니다</small>
                    </div>

                    <button type="submit" class="btn" id="generateReviewTeamBtn">
                        체험단 리뷰 생성하기
                    </button>
                </form>
            </div>

            <!-- 방문후기 탭 -->
            <div class="tab-content" id="visit-review-tab">
                <form id="visitReviewForm">
                    <div class="form-group">
                        <label for="companyName3">업체명 *</label>
                        <input 
                            type="text" 
                            id="companyName3" 
                            name="companyName" 
                            required 
                            placeholder="예: 동흥안가"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 정확한 상호명을 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="companyAddress3">업체주소 *</label>
                        <input 
                            type="text" 
                            id="companyAddress3" 
                            name="companyAddress" 
                            required 
                            placeholder="예: 부산광역시 해운대구 우동 1394-84"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 정확한 주소를 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="businessHours3">영업시간 *</label>
                        <input 
                            type="text" 
                            id="businessHours3" 
                            name="businessHours" 
                            required 
                            placeholder="예: 11:30-22:00 (매일, 15:00-17:00 브레이크타임)"
                        />
                        <small style="color: #666; font-size: 12px;">영업시간과 휴무일을 입력해주세요</small>
                    </div>

                    <div class="form-group">
                        <label for="mainMenu3">대표메뉴 *</label>
                        <textarea 
                            id="mainMenu3" 
                            name="mainMenu" 
                            required 
                            placeholder="예: 삼겹살, 목살, 갈비"
                        ></textarea>
                        <small style="color: #666; font-size: 12px;">가게의 대표 메뉴들을 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="landmarks3">주변 랜드마크</label>
                        <input 
                            type="text" 
                            id="landmarks3" 
                            name="landmarks" 
                            placeholder="예: 해운대해수욕장, 센텀시티, 해운대역"
                        />
                        <small style="color: #666; font-size: 12px;">주변 유명한 장소나 랜드마크를 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="keywords3">키워드</label>
                        <input 
                            type="text" 
                            id="keywords3" 
                            name="keywords" 
                            placeholder="예: 30년전통, 신선한고기, 가족식당, 부산맛집"
                        />
                        <small style="color: #666; font-size: 12px;">가게의 특징이나 키워드를 입력해주세요 (쉼표로 구분)</small>
                    </div>

                    <div class="form-group">
                        <label for="existingBlog3">기존 블로그 글 *</label>
                        <textarea 
                            id="existingBlog3" 
                            name="existingBlog" 
                            required 
                            placeholder="기존에 작성하신 블로그 글을 복사해서 붙여넣어주세요. 이 글의 스타일과 톤앤매너를 참고하여 새로운 방문 후기를 작성합니다."
                        ></textarea>
                        <small style="color: #666; font-size: 12px;">기존 블로그 글의 스타일을 참고하여 방문 후기 형태로 작성합니다</small>
                    </div>

                    <button type="submit" class="btn" id="generateVisitReviewBtn">
                        방문 후기 생성하기
                    </button>
                </form>
            </div>
        </div>

        <div class="result-section" id="resultSection">
            <div class="step-indicator">
                <div class="step" id="step1">1. 가게 정보 분석</div>
                <div class="step" id="step2">2. 블로그 주제 추천</div>
                <div class="step" id="step3">3. 블로그 글 생성</div>
            </div>

            <div id="loadingDiv" class="loading">
                <div class="spinner"></div>
                <p>AI가 가게 정보를 분석하고 있습니다...</p>
            </div>

            <div id="errorDiv" class="error" style="display: none;">
                <strong>오류가 발생했습니다:</strong>
                <p id="errorMessage"></p>
            </div>

            <div id="successDiv" class="success" style="display: none;">
                <strong>블로그가 성공적으로 생성되었습니다!</strong>
            </div>

            <div id="blogTopics" style="display: none;">
                <h3>추천 블로그 주제 (5개) - 클릭하여 선택</h3>
                <p style="color: #666; margin: 10px 0;">마음에 드는 주제를 클릭하시면 해당 주제로 블로그 글을 생성합니다</p>
                <div id="topicsList"></div>
            </div>

            <div id="blogContent" style="display: none;">
                <h3>생성된 블로그 글</h3>
                <div id="blogText" class="blog-content"></div>
            </div>
        </div>
    </div>

    <script>
        // DOM 요소들
        const blogForm = document.getElementById('blogForm');
        const reviewTeamForm = document.getElementById('reviewTeamForm');
        const visitReviewForm = document.getElementById('visitReviewForm');
        const generateBtn = document.getElementById('generateBtn');
        const generateReviewTeamBtn = document.getElementById('generateReviewTeamBtn');
        const generateVisitReviewBtn = document.getElementById('generateVisitReviewBtn');
        const resultSection = document.getElementById('resultSection');
        const loadingDiv = document.getElementById('loadingDiv');
        const errorDiv = document.getElementById('errorDiv');
        const successDiv = document.getElementById('successDiv');
        const blogTopics = document.getElementById('blogTopics');
        const topicsList = document.getElementById('topicsList');
        const blogContent = document.getElementById('blogContent');
        const blogText = document.getElementById('blogText');

        // 탭 기능
        const tabBtns = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetTab = btn.getAttribute('data-tab');
                
                // 모든 탭 버튼과 콘텐츠에서 active 클래스 제거
                tabBtns.forEach(b => b.classList.remove('active'));
                tabContents.forEach(c => c.classList.remove('active'));
                
                // 선택된 탭 활성화
                btn.classList.add('active');
                document.getElementById(targetTab + '-tab').classList.add('active');
                
                // 결과 섹션 숨기기
                resultSection.classList.remove('show');
            });
        });

        // 단계 표시 업데이트
        function updateStep(step) {
            document.querySelectorAll('.step').forEach((el, index) => {
                if (index < step) {
                    el.classList.add('active');
                } else {
                    el.classList.remove('active');
                }
            });
        }

        // 로딩 표시
        function showLoading(message) {
            loadingDiv.style.display = 'block';
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';
            blogTopics.style.display = 'none';
            blogContent.style.display = 'none';
            loadingDiv.querySelector('p').textContent = message;
        }

        // 오류 표시
        function showError(message) {
            loadingDiv.style.display = 'none';
            errorDiv.style.display = 'block';
            successDiv.style.display = 'none';
            blogTopics.style.display = 'none';
            blogContent.style.display = 'none';
            document.getElementById('errorMessage').textContent = message;
        }

        // 성공 표시
        function showSuccess() {
            loadingDiv.style.display = 'none';
            errorDiv.style.display = 'none';
            successDiv.style.display = 'block';
        }

        // 주제 표시
        function showTopics(topics) {
            blogTopics.style.display = 'block';
            topicsList.innerHTML = '';
            
            topics.forEach((topic, index) => {
                const topicCard = document.createElement('div');
                topicCard.className = 'topic-card';
                topicCard.innerHTML = `
                    <h3>${topic.title}</h3>
                    <p>${topic.description}</p>
                    <div class="keywords">키워드: ${topic.keywords}</div>
                `;
                topicCard.addEventListener('click', () => generateBlogWithTopic(topic.title));
                topicsList.appendChild(topicCard);
            });
        }

        // 선택된 주제로 블로그 생성
        async function generateBlogWithTopic(selectedTopic) {
            try {
                showLoading("선택된 주제로 블로그 글을 생성하고 있습니다...");
                updateStep(3);

                // 입력된 정보로 가게 정보 객체 생성
                const companyInfo = {
                    name: document.getElementById('companyName').value,
                    address: document.getElementById('companyAddress').value,
                    hours: document.getElementById('businessHours').value,
                    mainMenu: document.getElementById('mainMenu').value,
                    landmarks: document.getElementById('landmarks').value || "",
                    keywords: document.getElementById('keywords').value || ""
                };

                // 블로그 내용 생성
                const blogContentText = generateBlogContent(companyInfo, selectedTopic);

                // 결과 표시
                setTimeout(() => {
                    showSuccess();
                    blogContent.style.display = 'block';
                    blogText.textContent = blogContentText;
                    updateStep(3);
                }, 2000);

            } catch (error) {
                console.error("Blog generation error:", error);
                showError("블로그 생성 중 오류가 발생했습니다: " + error.message);
            }
        }

        // 블로그 주제 생성 (전문 마케팅 전문가 방식)
        function generateBlogTopics(companyInfo) {
            const menuList = companyInfo.mainMenu.split(',').map(menu => menu.trim());
            const firstMenu = menuList[0] || "대표메뉴";
            const landmarks = companyInfo.landmarks ? companyInfo.landmarks.split(',').map(l => l.trim()) : [];
            const keywords = companyInfo.keywords ? companyInfo.keywords.split(',').map(k => k.trim()) : [];
            const location = companyInfo.address.split(' ').slice(0, 2).join(' '); // 시/구 추출

            return [
                {
                    title: `${companyInfo.name} ${firstMenu}, 손님들이 극찬하는 비밀은?`,
                    description: `${firstMenu}의 특별한 맛을 만드는 우리만의 조리법과 엄선된 재료 이야기. 손님들이 왜 계속 찾아오시는지 그 비밀을 솔직하게 공개합니다.`,
                    keywords: `${firstMenu}, ${companyInfo.name}, ${location}맛집, 비밀레시피, ${keywords[0] || '신선한재료'}`
                },
                {
                    title: `${location} ${firstMenu} 맛집 찾으시나요? ${companyInfo.name} 사장이 직접 알려드립니다`,
                    description: `${landmarks[0] ? landmarks[0] + ' 근처' : location}에서 가게를 운영하며 겪은 진솔한 이야기. 손님 한 분 한 분을 위한 정성이 담긴 우리의 운영 철학을 공유합니다.`,
                    keywords: `${location}맛집, ${firstMenu}맛집, ${companyInfo.name}, ${landmarks[0] || location}, 맛집추천`
                },
                {
                    title: `${companyInfo.name}의 ${keywords[0] || '특별한'} 재료 이야기 - 맛의 차이는 여기서 시작됩니다`,
                    description: `매일 새벽 엄선하는 최고 품질의 재료들. ${keywords[0] || '신선한'} 재료로 만드는 우리 메뉴의 특별함과 재료 선택 철학을 전합니다.`,
                    keywords: `재료선택, ${keywords[0] || '신선한재료'}, ${companyInfo.name}, 품질관리, ${firstMenu}`
                },
                {
                    title: `${companyInfo.name}에서 보낸 특별한 시간들 - 손님과 함께 쓰는 이야기`,
                    description: `오랜 시간 가게를 운영하며 만난 소중한 손님들과의 따뜻한 추억. 맛집은 음식뿐 아니라 사람과 사람이 만나는 공간입니다.`,
                    keywords: `${companyInfo.name}, 손님이야기, ${location}, 맛집후기, 따뜻한식당`
                },
                {
                    title: `처음 오시는 분들께 - ${companyInfo.name} 사장이 추천하는 메뉴와 이용 꿀팁`,
                    description: `${firstMenu}, ${menuList.slice(0, 3).join(', ')} 등 대표 메뉴 소개와 방문 시 꼭 알아두면 좋을 정보들. 첫 방문도 단골처럼 즐기실 수 있도록 도와드립니다.`,
                    keywords: `${companyInfo.name}, ${firstMenu}, 메뉴추천, ${location}맛집, 첫방문가이드`
                }
            ];
        }

        // 블로그 내용 생성 (전문 프롬프트 기반 - 서론 300자, 본론 1000자, 결론 700자)
        function generateBlogContent(companyInfo, topic) {
            const menuList = companyInfo.mainMenu.split(',').map(menu => menu.trim());
            const currentSeason = getCurrentSeason();
            const landmarks = companyInfo.landmarks ? companyInfo.landmarks.split(',').map(l => l.trim()) : [];
            const keywords = companyInfo.keywords ? companyInfo.keywords.split(',').map(k => k.trim()) : [];
            const location = companyInfo.address.split(' ').slice(0, 2).join(' ');
            
            let content = '';
            
            // ========== 서론 (300자) ==========
            // 따뜻한 인사와 자기소개
            content += `안녕하세요, ${companyInfo.name} 사장입니다.\n\n`;
            content += `${location}에서 손님들께 맛있는 음식을 대접하는 것이 하루하루의 보람입니다. `;
            content += `오늘은 "${topic}"에 대해 말씀드리려고 합니다.\n\n`;
            
            // 독자의 관심을 끄는 질문이나 일화
            if (topic.includes("비밀")) {
                content += `"이 집 ${menuList[0]}, 왜 이렇게 맛있어요?"라는 질문을 정말 자주 받습니다. `;
                content += `처음엔 그저 당연하다고 생각했던 것들이, 알고 보니 저희만의 특별한 비법이더라고요. `;
                content += `손님들이 계속 찾아오시는 이유, 오늘 솔직하게 말씀드릴게요.\n\n`;
            } else if (topic.includes("재료")) {
                content += `맛있는 음식의 시작은 좋은 재료입니다. 이건 제가 가게를 시작하면서부터 지켜온 철칙이에요. `;
                content += `${keywords[0] || '신선한 재료'}를 고집하는 이유, 그리고 그 과정에서 겪는 이야기들을 나눠볼까 합니다.\n\n`;
            } else if (topic.includes("손님") || topic.includes("이야기")) {
                content += `가게를 운영하며 가장 큰 기쁨은 손님들과의 소중한 인연입니다. `;
                content += `맛있는 음식도 좋지만, 함께 나누는 따뜻한 이야기들이 저를 이 자리에 있게 해주는 힘이에요. `;
                content += `오늘은 그런 특별한 순간들을 함께 나눠보려 합니다.\n\n`;
            } else {
                content += `${landmarks[0] ? landmarks[0] + ' 근처' : location}에서 저희 가게를 운영한 지 어느덧 시간이 꽤 흘렀네요. `;
                content += `처음 오시는 분들도, 단골 손님들도 모두 만족하실 수 있도록 늘 최선을 다하고 있습니다. `;
                content += `오늘은 저희 가게 이야기를 좀 더 깊이 들려드리고 싶어요.\n\n`;
            }
            
            // ========== 본론 1부 (400자) ==========
            // 선택된 주제의 핵심 내용 전개
            if (topic.includes("비밀")) {
                content += `## 우리만의 특별한 조리법\n\n`;
                content += `**${menuList[0]}**를 만드는 과정은 새벽부터 시작됩니다. 시장에서 직접 눈으로 보고 고른 `;
                content += `${keywords[0] || '최상급'} 재료들만 사용하거든요. 좋은 재료를 쓰면 조리법이 복잡할 필요가 없어요.\n\n`;
                content += `저희만의 비법이라면, 재료 본연의 맛을 최대한 살리는 거예요. `;
                content += `${menuList[0]}의 경우, 적절한 온도와 시간을 맞추는 게 정말 중요합니다. `;
                content += `수십 번의 시행착오 끝에 찾아낸 황금 비율이 있거든요.\n\n`;
                content += `특히 ${currentSeason}철에는 제철 재료의 맛이 더욱 살아있어서, 같은 메뉴라도 더욱 풍미가 깊어집니다. `;
                content += `이런 디테일한 부분까지 신경 쓰니까 손님들이 "여기는 뭔가 다르다"고 말씀해주시는 것 같아요.\n\n`;
            } else if (topic.includes("재료")) {
                content += `## 매일 새벽 시장에서 시작하는 하루\n\n`;
                content += `새벽 5시, 아직 어둑한 시간에 하루가 시작됩니다. ${location} 전통시장에 가면 가장 신선한 재료들을 만날 수 있거든요. `;
                content += `${keywords[0] || '최고 품질'}의 재료를 고르는 일은 결코 타협할 수 없는 부분이에요.\n\n`;
                content += `**${menuList[0]}**에 들어가는 주재료는 특히 까다롭게 선별합니다. `;
                content += `색깔, 신선도, 육질까지 일일이 확인하죠. 시장 상인분들과 오랜 시간 신뢰를 쌓아왔기에 `;
                content += `정말 좋은 것들을 먼저 소개받을 수 있게 되었어요.\n\n`;
                content += `부재료 하나하나도 소홀히 하지 않습니다. 양념에 들어가는 재료들도 직접 손질하고 준비하죠. `;
                content += `시간이 더 걸리더라도 정성을 들이면 그 맛이 확실히 다르더라고요.\n\n`;
            } else if (topic.includes("손님") || topic.includes("이야기")) {
                content += `## 손님들과 함께한 특별한 순간들\n\n`;
                content += `가게를 운영하다 보면 정말 다양한 손님들을 만나게 됩니다. `;
                content += `특히 기억에 남는 분이 계세요. 매주 같은 시간에 오셔서 **${menuList[0]}**를 드시는 단골 할머니인데, `;
                content += `"우리 며느리가 해주던 맛이 여기 있어"라고 하시며 눈시울을 붉히시더라고요.\n\n`;
                content += `또 어떤 날은 젊은 커플이 오셔서 프러포즈를 하시기도 했어요. `;
                content += `저희 가게가 두 분의 추억이 담긴 장소라며, 특별한 날을 여기서 보내고 싶다고 하셨죠. `;
                content += `그런 순간들이 저에게는 어떤 보상보다 값진 것 같아요.\n\n`;
                content += `${landmarks[0] ? landmarks[0] + ' 근처에서' : '이 지역에서'} 일하시는 직장인분들도 많이 찾아주십니다. `;
                content += `"사장님, 오늘도 힘내세요!"라는 인사를 건네주실 때면 정말 힘이 나죠.\n\n`;
            } else {
                content += `## ${companyInfo.name}만의 특별함\n\n`;
                content += `저희 ${companyInfo.name}는 ${location}에서 손님들과 함께 성장해왔습니다. `;
                content += `**${menuList[0]}**, **${menuList[1] || menuList[0]}** 등 대표 메뉴들은 손님들의 피드백을 받아가며 `;
                content += `계속해서 발전시켜왔어요.\n\n`;
                content += `${keywords[0] || '정성스러운 조리'}가 저희의 모토입니다. `;
                content += `빠르게 많이 만드는 것보다, 한 그릇 한 그릇 정성을 담아 만드는 게 중요하다고 생각해요. `;
                content += `그래서 가끔 음식이 조금 늦게 나갈 때도 있지만, 손님들께서 이해해주시고 기다려주세요.\n\n`;
                content += `${currentSeason}철에는 특별히 제철 식재료를 활용한 메뉴들을 선보이고 있습니다. `;
                content += `계절의 맛을 느끼실 수 있도록 항상 고민하고 있어요.\n\n`;
            }
            
            // ========== 본론 2부 (400자) ==========
            // 대표 메뉴와 연결된 스토리
            content += `## 우리 가게 대표 메뉴 이야기\n\n`;
            content += `**${menuList[0]}**는 정말 자신 있게 추천드리는 메뉴입니다. `;
            content += `${keywords[0] || '엄선된'} 재료와 저희만의 비법으로 만들어내는 이 맛은 `;
            content += `한 번 드시면 잊을 수 없는 맛이에요.\n\n`;
            
            if (menuList.length > 1) {
                content += `**${menuList[1]}**도 많은 사랑을 받고 있습니다. `;
                content += `${menuList[0]}와는 또 다른 매력이 있는 메뉴죠. `;
                content += `처음 오시는 분들은 두 가지를 함께 주문하셔서 맛을 비교해보시는 것도 추천드려요.\n\n`;
            }
            
            if (menuList.length > 2) {
                content += `${menuList.slice(2).join(', ')} 등 다양한 메뉴들도 준비되어 있어요. `;
                content += `각각의 메뉴마다 정성이 담겨있고, 손님들의 취향에 맞게 선택하실 수 있답니다.\n\n`;
            }
            
            content += `손님들께서 남겨주신 리뷰를 보면 "재료가 신선해요", "정성이 느껴져요", `;
            content += `"다른 곳과는 확실히 다르네요" 같은 말씀을 많이 해주십니다. `;
            content += `이런 피드백 하나하나가 정말 큰 힘이 되고, 더 잘해야겠다는 다짐을 하게 만들어요.\n\n`;
            
            // ========== 본론 3부 (200자) ==========
            // 손님들과의 소중한 인연
            content += `## 감사한 마음\n\n`;
            content += `가게를 운영하면서 가장 보람찬 순간은 손님들의 미소를 볼 때입니다. `;
            content += `"잘 먹었습니다", "다음에 또 올게요"라는 말 한마디가 `;
            content += `힘든 하루를 견디게 해주는 원동력이 되거든요.\n\n`;
            content += `단순히 음식을 파는 가게가 아니라, 손님들과 따뜻한 인연을 맺는 공간이 되고 싶습니다. `;
            content += `${companyInfo.name}가 여러분의 소중한 추억이 되었으면 좋겠어요.\n\n`;
            
            // ========== 결론 1부 (300자) ==========
            // 앞으로의 계획이나 다짐
            content += `## 앞으로도 변하지 않을 것들\n\n`;
            content += `앞으로도 ${companyInfo.name}는 ${keywords[0] || '최고의 품질'}과 진심 어린 서비스로 `;
            content += `손님들을 맞이하겠습니다. 유행을 따르기보다는, 저희만의 정체성을 지켜나가는 것이 중요하다고 생각해요.\n\n`;
            content += `${currentSeason}을 맞아 새로운 메뉴도 준비 중입니다. `;
            content += `계절의 맛을 담은 특별한 요리들로 손님들께 또 다른 즐거움을 드리고 싶어요. `;
            content += `변화하되, 본질은 지키는 것이 저희의 방향입니다.\n\n`;
            
            // ========== 결론 2부 (400자) ==========
            // 방문 안내 및 마무리
            content += `## 방문 안내\n\n`;
            content += `**${companyInfo.name}**는 ${companyInfo.address}에 위치해 있습니다.\n`;
            content += `영업시간은 ${companyInfo.hours}이니 참고해주세요.\n\n`;
            
            if (landmarks.length > 0) {
                content += `${landmarks[0]}에서 가깝고, ${landmarks.length > 1 ? landmarks.slice(1).join(', ') + '도' : ''} 근처라 `;
                content += `찾아오시기 편하실 거예요.\n\n`;
            }
            
            content += `처음 오시는 분들께는 **${menuList[0]}**를 추천드립니다. `;
            content += `저희 가게의 정체성을 가장 잘 보여주는 메뉴거든요.\n\n`;
            content += `늘 정성을 다해 손님들을 맞이하겠습니다. `;
            content += `${location}에서 맛있는 한 끼 드시고 싶으실 때, ${companyInfo.name}를 기억해주세요. `;
            content += `감사합니다!\n\n`;
            
            // ========== 해시태그 (10개 내외) ==========
            const hashtags = [
                `#${companyInfo.name.replace(/\s+/g, '')}`,
                `#${location.replace(/\s+/g, '')}맛집`,
                `#${menuList[0].replace(/\s+/g, '')}`,
                `#${keywords[0] ? keywords[0].replace(/\s+/g, '') : '신선한재료'}`,
                `#정성스러운조리`,
                `#사장님맛집`,
                `#로컬맛집`,
                `#단골맛집`,
                landmarks[0] ? `#${landmarks[0].replace(/\s+/g, '')}` : `#숨은맛집`,
                `#맛집추천`
            ];
            
            content += hashtags.join(' ');
            
            return content;
        }

        // 현재 계절 가져오기
        function getCurrentSeason() {
            const month = new Date().getMonth() + 1;
            if (month >= 3 && month <= 5) return "봄";
            if (month >= 6 && month <= 8) return "여름";
            if (month >= 9 && month <= 11) return "가을";
            return "겨울";
        }

        // 체험단 리뷰 생성 (고퀄리티 버전)
        function generateReviewTeamContent(companyInfo, existingBlog) {
            const menuList = companyInfo.mainMenu.split(',').map(menu => menu.trim());
            const landmarks = companyInfo.landmarks ? companyInfo.landmarks.split(',').map(l => l.trim()) : [];
            const keywords = companyInfo.keywords ? companyInfo.keywords.split(',').map(k => k.trim()) : [];
            const location = companyInfo.address.split(' ').slice(0, 2).join(' ');
            const currentSeason = getCurrentSeason();
            
            let content = '';
            
            // === 제목 ===
            const titlePatterns = [
                `[체험단] ${companyInfo.name} 솔직 후기 - ${menuList[0]} 미쳤어요!`,
                `${landmarks[0] || location} 맛집 ${companyInfo.name} 체험단 다녀왔어요 (${menuList[0]} 후기)`,
                `[${location}맛집] ${companyInfo.name} 체험단 리뷰 | ${menuList[0]} 완전 대박`,
                `${companyInfo.name} 체험단 후기 - ${keywords[0] || '정성스러운'} ${menuList[0]} 강추!`
            ];
            content += titlePatterns[Math.floor(Math.random() * titlePatterns.length)] + '\n\n';
            
            // === 서론 (300-400자) ===
            const openingPatterns = [
                `안녕하세요! 이번에 ${companyInfo.name} 체험단에 선정되어 다녀왔습니다.\n\n` +
                `${landmarks[0] ? landmarks[0] + ' 근처' : location}에 위치한 ${companyInfo.name}는 ${keywords[0] || '맛있기로'} 유명한 곳이라고 하더라구요. ` +
                `${menuList[0]}가 시그니처 메뉴라고 해서 정말 기대가 됐어요. 체험단이지만 100% 솔직하게 후기 남겨볼게요!`,
                
                `${companyInfo.name} 체험단으로 방문했습니다!\n\n` +
                `평소에도 ${menuList[0]} 진짜 좋아하는데, ${location}에서 ${keywords[0] || '정성스럽게'} 만드는 곳이 있다고 해서 ` +
                `정말 궁금했거든요. ${landmarks[0] ? landmarks[0] + ' 바로 옆이라' : ''} 위치도 좋고, 기대 많이 하고 갔습니다!`,
                
                `${companyInfo.name} 체험단 후기 남깁니다.\n\n` +
                `${companyInfo.address}에 위치해 있는 ${companyInfo.name}! ` +
                `${keywords[0] || '신선한 재료'}로 만드는 ${menuList[0]}가 대표 메뉴라고 하더라구요. ` +
                `체험단이라고 해서 부담 갖지 말라고 사장님께서 말씀해주셨어요. 편하게 즐기고 왔습니다!`
            ];
            content += openingPatterns[Math.floor(Math.random() * openingPatterns.length)] + '\n\n';
            
            // === 본론 1부: 매장 첫인상 (400자) ===
            content += `## 매장 첫인상 & 분위기\n\n`;
            const atmospherePatterns = [
                `${companyInfo.address}에 도착하니 ${keywords[0] || '깔끔한'} 외관이 눈에 띄더라구요. ` +
                `${landmarks[0] ? landmarks[0] + '에서 정말 가까워서' : '주차도 편하고'} 접근성이 좋았어요.\n\n` +
                `매장 안으로 들어가니 ${keywords[0] || '아늑하면서도'} 현대적인 인테리어가 정말 인상적이었어요. ` +
                `테이블 간격도 넉넉해서 편안하게 식사할 수 있는 구조더라구요. 조명도 은은해서 분위기 정말 좋았습니다.`,
                
                `문을 열고 들어서자마자 느껴지는 ${keywords[0] || '따뜻한'} 분위기! ` +
                `${landmarks[0] ? landmarks[0] + ' 근처라' : location + '에 위치해서'} 찾기도 쉬웠어요.\n\n` +
                `사장님께서 직접 맞아주시면서 친절하게 안내해주셨어요. 인테리어는 ${keywords[0] || '모던하면서도'} 편안한 느낌이고, ` +
                `청결 상태도 완벽했습니다. 첫인상부터 마음에 들었어요!`
            ];
            content += atmospherePatterns[Math.floor(Math.random() * atmospherePatterns.length)] + '\n\n';
            
            // === 본론 2부: 메뉴 주문 & 대기 (300자) ===
            content += `## 메뉴 주문\n\n`;
            const orderPatterns = [
                `영업시간은 ${companyInfo.hours}이고, 메뉴판을 보니 ${menuList.join(', ')} 등 다양한 메뉴가 있더라구요.\n\n` +
                `사장님께서 대표 메뉴인 **${menuList[0]}**를 추천해주셔서 주문했어요. ` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 인기 메뉴라고 하셔서 함께 주문했습니다. ` : ''}` +
                `음식이 나오는 동안 사장님께서 재료와 조리법에 대해 설명해주시는데, 정성이 정말 대단하시더라구요.`,
                
                `메뉴를 보니 ${menuList.join(', ')} 등이 있는데, 고민하다가 시그니처인 **${menuList[0]}** 주문!\n\n` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 추천받아서 함께 시켰어요. ` : ''}` +
                `${keywords[0] || '신선한 재료'}만 사용한다고 하시면서, 매일 새벽에 직접 시장에서 재료를 고르신다고 하더라구요. ` +
                `이런 정성이라니... 기대감이 더 높아졌어요!`
            ];
            content += orderPatterns[Math.floor(Math.random() * orderPatterns.length)] + '\n\n';
            
            // === 본론 3부: 음식 맛 (500자) ===
            content += `## 드디어 음식이 나왔어요!\n\n`;
            const tastePatterns = [
                `**${menuList[0]}**가 나왔는데... 와, 비주얼부터 완전 대박이에요! 📸\n\n` +
                `한입 먹자마자 "이거 진짜 맛있다!"가 절로 나왔어요. ${keywords[0] || '신선한'} 재료의 맛이 그대로 살아있고, ` +
                `조리도 완벽했어요. ${currentSeason}철 제철 재료를 사용하셔서 그런지 풍미가 정말 깊더라구요.\n\n` +
                `특히 양념장이 정말 일품이었어요. 너무 자극적이지 않으면서도 감칠맛이 끝내줬어요. ` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 정말 맛있었는데, ${menuList[0]}와는 또 다른 매력이 있었어요. ` : ''}` +
                `이 정도 퀄리티면 가격이 비싸도 이해할 것 같은데, 가격도 정말 합리적이더라구요!`,
                
                `드디어 **${menuList[0]}** 등장! 사진으로는 다 담을 수 없을 만큼 비주얼이 끝내줬어요.\n\n` +
                `첫 맛... 진짜 미쳤어요. ${keywords[0] || '최상급'} 재료를 쓴 게 확실히 느껴지고, ` +
                `사장님의 손맛이 정말 대단하시더라구요. 조리 시간, 온도, 모든 게 완벽했어요.\n\n` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 같이 먹어봤는데, 이것도 정말 훌륭했어요! ` : ''}` +
                `${currentSeason}철에 맞는 제철 식재료로 만드신다고 하는데, 계절의 맛이 정말 살아있었어요. ` +
                `이런 정성스러운 음식을 이 가격에 먹을 수 있다니 정말 감사했습니다!`
            ];
            content += tastePatterns[Math.floor(Math.random() * tastePatterns.length)] + '\n\n';
            
            // === 본론 4부: 추가 메뉴 & 서비스 (300자) ===
            content += `## 서비스 & 추가 포인트\n\n`;
            const servicePatterns = [
                `사장님과 직원분들이 정말 친절하세요. 물도 수시로 채워주시고, 필요한 게 있는지 계속 확인해주셨어요.\n\n` +
                `특히 인상 깊었던 건, 음식에 대한 설명을 자세히 해주시는 거예요. 어떤 재료를 쓰셨는지, ` +
                `어떻게 조리하셨는지, 어떻게 먹으면 더 맛있는지까지! 음식에 대한 자부심이 느껴졌어요.`,
                
                `서비스가 정말 좋았어요! 체험단이라고 해서 특별 대우 받은 게 아니라, ` +
                `다른 손님들께도 똑같이 친절하게 대하시는 모습이 인상적이었어요.\n\n` +
                `${keywords[0] || '정성스러운'} 음식만큼이나 서비스도 훌륭했습니다. ` +
                `식사 중간중간 괜찮은지 확인해주시고, 반찬도 알아서 리필해주시더라구요.`
            ];
            content += servicePatterns[Math.floor(Math.random() * servicePatterns.length)] + '\n\n';
            
            // === 결론 (400자) ===
            content += `## 총평 & 추천\n\n`;
            const conclusionPatterns = [
                `체험단으로 방문했지만, 100% 솔직하게 말씀드려서 ${companyInfo.name} 정말 강력 추천합니다! 👍\n\n` +
                `음식 맛, 서비스, 분위기, 가격 모든 면에서 만족스러웠어요. ` +
                `특히 **${menuList[0]}**는 ${location}에서 최고 수준이라고 자신 있게 말할 수 있어요.\n\n` +
                `**📍 매장 정보**\n` +
                `- 상호명: ${companyInfo.name}\n` +
                `- 위치: ${companyInfo.address}\n` +
                `- 영업시간: ${companyInfo.hours}\n` +
                `- 대표메뉴: ${menuList.join(', ')}\n` +
                `${landmarks.length > 0 ? `- 주변: ${landmarks.join(', ')}\n` : ''}\n` +
                `${keywords[0] || '정성스러운'} 음식 좋아하시는 분들, ${location}에서 맛집 찾으시는 분들께 강추합니다!`,
                
                `체험단 후기지만 과장 하나 없이, ${companyInfo.name} 정말 훌륭한 맛집이었습니다!\n\n` +
                `사장님의 음식에 대한 철학과 정성이 느껴지는 곳이에요. ` +
                `${menuList[0]} 드시러 ${landmarks[0] || location}에 오신다면 꼭 방문해보세요. 후회 안 하실 거예요.\n\n` +
                `**${companyInfo.name} 정보 요약**\n` +
                `📍 ${companyInfo.address}\n` +
                `⏰ ${companyInfo.hours}\n` +
                `🍽️ 추천메뉴: ${menuList.join(', ')}\n` +
                `${landmarks.length > 0 ? `📌 ${landmarks.join(', ')} 근처\n` : ''}\n` +
                `체험단이 아니어도 재방문 100% 할 만한 곳입니다!`
            ];
            content += conclusionPatterns[Math.floor(Math.random() * conclusionPatterns.length)] + '\n\n';
            
            // === 해시태그 ===
            const hashtags = [
                `#${companyInfo.name.replace(/\s+/g, '')}`,
                `#${location.replace(/\s+/g, '')}맛집`,
                `#${menuList[0].replace(/\s+/g, '')}`,
                `#체험단`,
                `#체험단리뷰`,
                `#맛집체험단`,
                landmarks[0] ? `#${landmarks[0].replace(/\s+/g, '')}맛집` : `#로컬맛집`,
                `#솔직후기`,
                `#맛집추천`,
                `#${keywords[0] ? keywords[0].replace(/\s+/g, '') : '정성스러운'}`,
                `#먹스타그램`,
                `#맛스타그램`
            ];
            content += hashtags.join(' ');
            
            return content;
        }

        // 방문 후기 생성 (고퀄리티 버전)
        function generateVisitReviewContent(companyInfo, existingBlog) {
            const menuList = companyInfo.mainMenu.split(',').map(menu => menu.trim());
            const landmarks = companyInfo.landmarks ? companyInfo.landmarks.split(',').map(l => l.trim()) : [];
            const keywords = companyInfo.keywords ? companyInfo.keywords.split(',').map(k => k.trim()) : [];
            const location = companyInfo.address.split(' ').slice(0, 2).join(' ');
            const currentSeason = getCurrentSeason();
            
            let content = '';
            
            // === 제목 ===
            const titlePatterns = [
                `${landmarks[0] || location} ${menuList[0]} 맛집 ${companyInfo.name} 다녀왔어요! (완전 대박)`,
                `[맛집후기] ${companyInfo.name} - ${menuList[0]} 진짜 미쳤어요 🤤`,
                `${companyInfo.name} 솔직 후기 | ${location} ${menuList[0]} 맛집 인정!`,
                `${menuList[0]} 맛집 찾다가 발견한 ${companyInfo.name} 완전 강추!`
            ];
            content += titlePatterns[Math.floor(Math.random() * titlePatterns.length)] + '\n\n';
            
            // === 서론 (300-400자) ===
            const openingPatterns = [
                `안녕하세요! 오늘은 ${landmarks[0] || location}에 있는 ${companyInfo.name} 다녀온 후기 남겨요.\n\n` +
                `사실 ${menuList[0]} 좋아해서 ${location} 쪽 맛집 엄청 찾아다니는 편인데요. ` +
                `친구가 여기 진짜 맛있다고 강추해서 반신반의하면서 갔는데... 와, 진짜 대박이더라구요! ` +
                `${keywords[0] || '정성스럽게'} 만드는 ${menuList[0]} 먹고 싶으신 분들 완전 추천해요!`,
                
                `${companyInfo.name} 방문 후기 남깁니다!\n\n` +
                `${landmarks[0] ? landmarks[0] + ' 근처' : location}에서 ${menuList[0]} 맛집 찾고 있었는데, ` +
                `SNS에서 ${companyInfo.name} 후기 보고 궁금해서 다녀왔어요. ` +
                `${keywords[0] || '신선한 재료'}로 만든다고 해서 기대 많이 했는데 기대 이상이었습니다! 솔직 후기 남겨볼게요.`,
                
                `어제 ${companyInfo.name} 다녀왔는데 너무 맛있어서 후기 안 남길 수가 없네요ㅠㅠ\n\n` +
                `${location}에서 ${menuList[0]} 먹을 만한 곳 찾다가 우연히 발견했는데, ` +
                `${companyInfo.address}에 있더라구요. ${landmarks[0] ? landmarks[0] + '에서 가까워서' : '찾기도 쉽고'} ` +
                `일단 위치는 만점! 들어가자마자 ${keywords[0] || '깔끔한'} 분위기에 첫인상부터 좋았어요.`
            ];
            content += openingPatterns[Math.floor(Math.random() * openingPatterns.length)] + '\n\n';
            
            // === 본론 1부: 매장 & 주문 (400자) ===
            content += `## 매장 분위기 & 주문\n\n`;
            const orderSectionPatterns = [
                `${companyInfo.address}에 도착! ${landmarks[0] ? landmarks[0] + ' 바로 옆이라' : '네비 찍으니'} 찾기 쉬웠어요. ` +
                `주차장도 있어서 편했구요.\n\n` +
                `들어가니 ${keywords[0] || '아늑한'} 인테리어에 손님들도 제법 있더라구요. ` +
                `영업시간은 ${companyInfo.hours}이고, 메뉴판 보니까 ${menuList.join(', ')} 등이 있었어요. ` +
                `일단 대표 메뉴인 **${menuList[0]}** 주문했습니다! ` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 맛있어 보여서 함께 시켰어요.` : ''}`,
                
                `위치는 ${companyInfo.address}이고, ${landmarks[0] ? landmarks[0] + ' 근처라서' : ''} 접근성 좋아요.\n\n` +
                `매장 들어서자마자 ${keywords[0] || '깔끔한'} 분위기가 확 느껴지더라구요. ` +
                `테이블 간격도 넉넉하고, 전체적으로 정돈된 느낌! ` +
                `메뉴 고민하다가 사장님께 추천받아서 **${menuList[0]}** 주문했어요. ` +
                `${companyInfo.hours}에 영업하시니까 참고하세요!`
            ];
            content += orderSectionPatterns[Math.floor(Math.random() * orderSectionPatterns.length)] + '\n\n';
            
            // === 본론 2부: 맛 리뷰 (500자) ===
            content += `## 음식 맛 (여기가 핵심!)\n\n`;
            const tasteReviewPatterns = [
                `음식 나오는 데 생각보다 시간이 좀 걸렸는데, 나오자마자 이해됐어요. 주문과 동시에 바로 조리하시더라구요! 👨‍🍳\n\n` +
                `**${menuList[0]}** 첫 맛... 진짜 미쳤어요. 이렇게 맛있는 ${menuList[0]} 처음 먹어봐요! ` +
                `${keywords[0] || '신선한'} 재료 쓴 게 확 느껴지고, 조리 완성도가 정말 높더라구요. ` +
                `${currentSeason}철이라 제철 재료로 만드셨다는데, 풍미가 정말 깊고 맛있었어요.\n\n` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 정말 훌륭했어요! ${menuList[0]}하고 스타일은 다른데 이것도 진심 맛있었습니다. ` : ''}` +
                `양념 간이 딱 적당하고, 재료 본연의 맛도 살아있고... 진짜 "이 집 대박이다" 싶었어요. ` +
                `가격 대비 퀄리티가 정말 훌륭합니다!`,
                
                `드디어 **${menuList[0]}** 등장! 비주얼부터 완전 대박이에요. 사진 찍느라 한참 걸렸어요 📸\n\n` +
                `한입 먹자마자... 와... 이게 진짜 맛이구나 싶었어요. ` +
                `${keywords[0] || '최상급'} 재료에 ${keywords[0] || '정성스러운'} 조리, 완벽한 조합이더라구요. ` +
                `특히 양념이 정말 일품이었어요. 자극적이지 않으면서도 깊은 맛이 느껴졌어요.\n\n` +
                `${menuList.length > 1 ? `**${menuList[1]}**도 같이 시켜서 먹어봤는데 이것도 완전 맛있었어요! ` : ''}` +
                `${currentSeason}철에 딱 맞는 메뉴라고 하시던데, 정말 계절의 맛이 살아있더라구요. ` +
                `이 정도 맛이면 가격이 비싸도 이해할 텐데, 가격도 정말 합리적이에요!`
            ];
            content += tasteReviewPatterns[Math.floor(Math.random() * tasteReviewPatterns.length)] + '\n\n';
            
            // === 본론 3부: 서비스 & 분위기 (300자) ===
            content += `## 서비스 & 전체적인 느낌\n\n`;
            const serviceReviewPatterns = [
                `사장님이랑 직원분들 정말 친절하세요! 물도 계속 채워주시고, 반찬도 알아서 리필해주시더라구요.\n\n` +
                `특히 사장님이 직접 음식 설명해주시는데, 재료랑 조리법에 대한 자부심이 느껴졌어요. ` +
                `${keywords[0] || '정성스럽게'} 만드시는 게 확실히 느껴지는 곳이에요. ` +
                `분위기도 편안하고, 혼밥하기도 좋고 가족 단위로 오기도 좋을 것 같아요.`,
                
                `서비스 만점! 직원분들 모두 친절하시고, 필요한 거 있으면 바로바로 가져다주세요.\n\n` +
                `가게 분위기도 ${keywords[0] || '아늑하고'} 깔끔해서 정말 좋았어요. ` +
                `청결 상태도 완벽하고, 테이블 간격도 넉넉해서 편하게 식사할 수 있었습니다. ` +
                `데이트 코스로도 좋고, 가족 모임 장소로도 딱일 것 같아요!`
            ];
            content += serviceReviewPatterns[Math.floor(Math.random() * serviceReviewPatterns.length)] + '\n\n';
            
            // === 결론 (400자) ===
            content += `## 총평 & 재방문 의사\n\n`;
            const finalReviewPatterns = [
                `${companyInfo.name} 진짜 완전 강추합니다! 재방문 의사 100%예요! 👍\n\n` +
                `음식 맛, 가격, 서비스, 분위기 모든 면에서 만족스러웠어요. ` +
                `${location}에서 ${menuList[0]} 맛집 찾으시는 분들, 여기 꼭 가보세요. 절대 후회 안 하실 거예요.\n\n` +
                `**📍 매장 정보 요약**\n` +
                `- 가게명: ${companyInfo.name}\n` +
                `- 주소: ${companyInfo.address}\n` +
                `- 영업시간: ${companyInfo.hours}\n` +
                `- 대표메뉴: ${menuList.join(', ')}\n` +
                `${landmarks.length > 0 ? `- 근처: ${landmarks.join(', ')}\n` : ''}\n` +
                `${keywords[0] || '맛있는'} ${menuList[0]} 드시고 싶으면 여기로 오세요! 강력 추천합니다!`,
                
                `완전 만족스러운 식사였어요! 다음 주에 또 가려구요 ㅎㅎ\n\n` +
                `${companyInfo.name}는 ${location}에서 제가 찾은 최고의 ${menuList[0]} 맛집이에요. ` +
                `${landmarks[0] ? landmarks[0] + ' 근처에서' : '이 지역에서'} 맛집 찾으시는 분들께 자신 있게 추천합니다!\n\n` +
                `**${companyInfo.name} 이용 정보**\n` +
                `📌 ${companyInfo.address}\n` +
                `⏰ ${companyInfo.hours}\n` +
                `🍴 시그니처: ${menuList.join(', ')}\n` +
                `${landmarks.length > 0 ? `🚗 ${landmarks.join(', ')} 인근\n` : ''}\n` +
                `가격도 착하고 맛도 좋고, 완벽한 맛집입니다!`
            ];
            content += finalReviewPatterns[Math.floor(Math.random() * finalReviewPatterns.length)] + '\n\n';
            
            // === 해시태그 ===
            const hashtags = [
                `#${companyInfo.name.replace(/\s+/g, '')}`,
                `#${location.replace(/\s+/g, '')}맛집`,
                `#${menuList[0].replace(/\s+/g, '')}맛집`,
                landmarks[0] ? `#${landmarks[0].replace(/\s+/g, '')}` : `#로컬맛집`,
                `#맛집추천`,
                `#맛집후기`,
                `#솔직후기`,
                `#리얼후기`,
                `#먹스타그램`,
                `#맛스타그램`,
                `#가성비맛집`,
                `#재방문의사`,
                `#단골각`
            ];
            content += hashtags.join(' ');
            
            return content;
        }

        // 우리매장 폼 제출 이벤트
        blogForm.addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const companyName = formData.get("companyName");
            const companyAddress = formData.get("companyAddress");
            const businessHours = formData.get("businessHours");
            const mainMenu = formData.get("mainMenu");
            const landmarks = formData.get("landmarks") || "";
            const keywords = formData.get("keywords") || "";

            // 유효성 검사
            if (!companyName || !companyAddress || !businessHours || !mainMenu) {
                alert("업체명, 업체주소, 영업시간, 대표메뉴를 모두 입력해주세요.");
                return;
            }

            try {
                generateBtn.disabled = true;
                generateBtn.textContent = "분석 중...";
                resultSection.classList.add('show');
                
                // Step 1: 가게 정보 분석
                showLoading("가게 정보를 분석하고 있습니다...");
                updateStep(1);

                // 입력된 정보로 가게 정보 객체 생성
                const companyInfo = {
                    name: companyName,
                    address: companyAddress,
                    hours: businessHours,
                    mainMenu: mainMenu,
                    landmarks: landmarks,
                    keywords: keywords
                };

                setTimeout(() => {
                    // Step 2: 블로그 주제 추천
                    showLoading("블로그 주제를 추천하고 있습니다...");
                    updateStep(2);

                    setTimeout(() => {
                        showSuccess();
                        
                        // 10개 블로그 주제 생성
                        const topics = generateBlogTopics(companyInfo);
                        showTopics(topics);
                    }, 2000);
                }, 2000);
                
            } catch (error) {
                console.error("Analysis error:", error);
                showError("분석 중 오류가 발생했습니다: " + error.message);
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = "블로그 생성하기";
            }
        });

        // 체험단 리뷰 폼 제출 이벤트
        reviewTeamForm.addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const companyName = formData.get("companyName");
            const companyAddress = formData.get("companyAddress");
            const businessHours = formData.get("businessHours");
            const mainMenu = formData.get("mainMenu");
            const landmarks = formData.get("landmarks") || "";
            const keywords = formData.get("keywords") || "";
            const existingBlog = formData.get("existingBlog");

            // 유효성 검사
            if (!companyName || !companyAddress || !businessHours || !mainMenu || !existingBlog) {
                alert("모든 필수 항목을 입력해주세요.");
                return;
            }

            try {
                generateReviewTeamBtn.disabled = true;
                generateReviewTeamBtn.textContent = "생성 중...";
                resultSection.classList.add('show');
                
                showLoading("체험단 리뷰를 생성하고 있습니다...");
                updateStep(3);

                // 입력된 정보로 가게 정보 객체 생성
                const companyInfo = {
                    name: companyName,
                    address: companyAddress,
                    hours: businessHours,
                    mainMenu: mainMenu,
                    landmarks: landmarks,
                    keywords: keywords
                };

                // 체험단 리뷰 생성
                const reviewContent = generateReviewTeamContent(companyInfo, existingBlog);

                setTimeout(() => {
                    showSuccess();
                    blogTopics.style.display = 'none';
                    blogContent.style.display = 'block';
                    blogText.textContent = reviewContent;
                    updateStep(3);
                }, 2000);
                
            } catch (error) {
                console.error("Review generation error:", error);
                showError("리뷰 생성 중 오류가 발생했습니다: " + error.message);
            } finally {
                generateReviewTeamBtn.disabled = false;
                generateReviewTeamBtn.textContent = "체험단 리뷰 생성하기";
            }
        });

        // 방문 후기 폼 제출 이벤트
        visitReviewForm.addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const companyName = formData.get("companyName");
            const companyAddress = formData.get("companyAddress");
            const businessHours = formData.get("businessHours");
            const mainMenu = formData.get("mainMenu");
            const landmarks = formData.get("landmarks") || "";
            const keywords = formData.get("keywords") || "";
            const existingBlog = formData.get("existingBlog");

            // 유효성 검사
            if (!companyName || !companyAddress || !businessHours || !mainMenu || !existingBlog) {
                alert("모든 필수 항목을 입력해주세요.");
                return;
            }

            try {
                generateVisitReviewBtn.disabled = true;
                generateVisitReviewBtn.textContent = "생성 중...";
                resultSection.classList.add('show');
                
                showLoading("방문 후기를 생성하고 있습니다...");
                updateStep(3);

                // 입력된 정보로 가게 정보 객체 생성
                const companyInfo = {
                    name: companyName,
                    address: companyAddress,
                    hours: businessHours,
                    mainMenu: mainMenu,
                    landmarks: landmarks,
                    keywords: keywords
                };

                // 방문 후기 생성
                const reviewContent = generateVisitReviewContent(companyInfo, existingBlog);

                setTimeout(() => {
                    showSuccess();
                    blogTopics.style.display = 'none';
                    blogContent.style.display = 'block';
                    blogText.textContent = reviewContent;
                    updateStep(3);
                }, 2000);
                
            } catch (error) {
                console.error("Review generation error:", error);
                showError("후기 생성 중 오류가 발생했습니다: " + error.message);
            } finally {
                generateVisitReviewBtn.disabled = false;
                generateVisitReviewBtn.textContent = "방문 후기 생성하기";
            }
        });
    </script>
</body>
</html>

