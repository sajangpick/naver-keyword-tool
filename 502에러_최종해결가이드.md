# 🚨 502 에러 최종 해결 가이드

## 현재 상황

- ✅ 코드 수정 완료 (Runway API ratio 형식)
- ✅ GitHub 푸시 완료
- ❌ 여전히 502 에러 발생

## 즉시 확인할 사항

### 1. Render 로그 확인 (가장 중요!)

Render 대시보드 → "Logs" 탭에서 확인:

**확인할 내용:**
- 서버가 정상 시작되었는지
- `SyntaxError: Missing catch or finally after try` 에러가 있는지
- 다른 에러 메시지가 있는지

**예상되는 로그:**
```
✅ Supabase 클라이언트 초기화 성공
✅ Gemini API 키 확인 완료
✅ Runway SDK 초기화 성공
🚀 서버가 포트 10000에서 실행 중입니다
```

**에러가 있다면:**
```
❌ SyntaxError: Missing catch or finally after try
   at /opt/render/project/src/server.js:XXXX
```

### 2. 헬스체크 테스트

브라우저에서 직접 접속:
```
https://naver-keyword-tool.onrender.com/health
```

**예상 결과:**
- ✅ `{"status":"ok"}` → 서버 정상 작동
- ❌ `502 Bad Gateway` → 서버 다운 또는 에러
- ❌ 연결 시간 초과 → 서버가 시작되지 않음

### 3. 서버 상태 확인

Render 대시보드에서:
- 서비스 상태: Live / Sleeping / Stopped
- 최근 배포 시간 확인
- 배포가 완료되었는지 확인

## 해결 방법

### 방법 1: 서버 재시작

Render 대시보드에서:
1. 서비스 클릭
2. "Manual Deploy" → "Deploy latest commit" 클릭
3. 또는 "Restart" 버튼 클릭

### 방법 2: 문법 오류 수정 (에러가 있다면)

Render 로그에서 정확한 줄 번호를 확인한 후:
1. 해당 줄 번호 확인
2. try-catch 구조 확인
3. 수정 후 재배포

### 방법 3: 환경변수 확인

Render 대시보드 → "Environment" 탭에서:
- `GEMINI_API_KEY` 확인
- `RUNWAY_API_KEY` 확인
- `SUPABASE_URL` 확인
- `SUPABASE_SERVICE_ROLE_KEY` 확인

## 다음 단계

1. **Render 로그 확인** - 정확한 에러 메시지 복사
2. **헬스체크 테스트** - 서버 상태 확인
3. **결과 공유** - 로그 내용 알려주기

## 문법 오류가 계속된다면

Render 로그에서 다음 정보를 알려주세요:
- 정확한 에러 메시지 (전체)
- 줄 번호 (예: `/opt/render/project/src/server.js:3589`)
- 에러 발생 전후의 로그

이 정보를 주시면 정확히 수정하겠습니다!

