# ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ê°€ì´ë“œ

## ğŸ“Š ê°œìš”

ì‚¬ì¥í”½ í”„ë¡œì íŠ¸ì˜ ë°ì´í„°ë² ì´ìŠ¤ëŠ” **ê¸°ëŠ¥ë³„ë¡œ ëª¨ë“ˆí™”**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸ—‚ï¸ í´ë” êµ¬ì¡°

```
database/
â”œâ”€â”€ schemas/
â”‚   â”œâ”€â”€ core/                    # í•µì‹¬ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ profiles             # íšŒì› í”„ë¡œí•„
â”‚   â”‚   â””â”€â”€ users                # ì¸ì¦ (Supabase Auth)
â”‚   â”‚
â”‚   â”œâ”€â”€ features/                # ê¸°ëŠ¥ë³„ í…Œì´ë¸”
â”‚   â”‚   â”œâ”€â”€ blog/               # â‘¡ ë¸”ë¡œê·¸ ìë™ ìƒì„±
â”‚   â”‚   â”‚   â”œâ”€â”€ blog-posts.sql
â”‚   â”‚   â”‚   â””â”€â”€ blog-diversity.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ review/             # â‘  ë¦¬ë·° ë¶„ì„ & ë‹µë³€
â”‚   â”‚   â”‚   â””â”€â”€ reviews.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ store/              # ê°€ê²Œ ì •ë³´ ê´€ë¦¬
â”‚   â”‚   â”‚   â””â”€â”€ store-promotion.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ cache/              # í¬ë¡¤ë§ ìºì‹œ
â”‚   â”‚   â”‚   â””â”€â”€ place-cache.sql
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ crm/                # â‘¢ ë‹¨ê³¨ ë¦¬ë§ˆì¼€íŒ… (ì˜ˆì •)
â”‚   â”‚   â”œâ”€â”€ analytics/          # â‘¥â‘¦ ë§¤ì¶œ/ìœ ì… ë¶„ì„ (ì˜ˆì •)
â”‚   â”‚   â”œâ”€â”€ sns/                # â‘§ SNS ëª¨ë‹ˆí„°ë§ (ì˜ˆì •)
â”‚   â”‚   â”œâ”€â”€ weather-marketing/  # â‘¤ ë‚ ì”¨ë³„ ì¶”ì²œ (ì˜ˆì •)
â”‚   â”‚   â””â”€â”€ ai-advisor/         # â‘© AI ì±—ë´‡ (ì˜ˆì •)
â”‚   â”‚
â”‚   â””â”€â”€ monitoring/              # ì–´ë“œë¯¼/ëª¨ë‹ˆí„°ë§ (â†’ admin/sql/monitoring/)
â”‚
â””â”€â”€ migrations/                  # ë²„ì „ë³„ ë§ˆì´ê·¸ë ˆì´ì…˜ (í–¥í›„)
```

## ğŸ“Œ í•µì‹¬ í…Œì´ë¸”

### profiles
- íšŒì› í”„ë¡œí•„ ì •ë³´
- ê°€ê²Œ ì •ë³´ (place_url, store_name, address, business_hours ë“±)
- ì „í™”ë²ˆí˜¸ (phone_number, store_phone_number)
- ë¸”ë¡œê·¸ ìŠ¤íƒ€ì¼ ì„¤ì • (blog_style jsonb)
- ìœ„ì¹˜: `database/schemas/core/`

## ğŸ¯ ê¸°ëŠ¥ë³„ í…Œì´ë¸”

### â‘¡ ë¸”ë¡œê·¸ ìë™ ìƒì„±
**í…Œì´ë¸”:**
- `blog_posts` - ìƒì„±ëœ ë¸”ë¡œê·¸ ê¸€ ì €ì¥
  - user_id, blog_type (our_store, review_team, visit_review)
  - blog_content, selected_topic
  - writing_angle, diversity_keywords

**ìŠ¤í‚¤ë§ˆ ìœ„ì¹˜:** `database/schem../01_ê¸°ëŠ¥_ì‚¬ìš©ì„¤ëª…ì„œ/blog/`

### â‘  ë¦¬ë·° ë¶„ì„ & ë‹µë³€
**í…Œì´ë¸”:**
- `reviews` - ë¦¬ë·° ë°ì´í„°
- `review_replies` - AI ìƒì„± ë‹µë³€
- `reply_templates` - ë‹µë³€ í…œí”Œë¦¿

**ìŠ¤í‚¤ë§ˆ ìœ„ì¹˜:** `database/schem../01_ê¸°ëŠ¥_ì‚¬ìš©ì„¤ëª…ì„œ/review/`

### ê°€ê²Œ ì •ë³´ ê´€ë¦¬
**í…Œì´ë¸”:**
- `store_promotions` - ë‚´ ê°€ê²Œ ì•Œë¦¬ê¸°
  - 7ê°œ í•­ëª©: signature_menu, special_ingredients, atmosphere_facilities, owner_story, recommended_situations, sns_photo_points, special_events

**ìŠ¤í‚¤ë§ˆ ìœ„ì¹˜:** `database/schem../01_ê¸°ëŠ¥_ì‚¬ìš©ì„¤ëª…ì„œ/store/`

### í¬ë¡¤ë§ ìºì‹œ
**í…Œì´ë¸”:**
- `place_crawl_cache` - ë„¤ì´ë²„ í”Œë ˆì´ìŠ¤ í¬ë¡¤ë§ ìºì‹œ (24ì‹œê°„)
  - place_url, place_info, crawl_count
  - ì¤‘ë³µ í¬ë¡¤ë§ ë°©ì§€

**ìŠ¤í‚¤ë§ˆ ìœ„ì¹˜:** `database/schem../01_ê¸°ëŠ¥_ì‚¬ìš©ì„¤ëª…ì„œ/cache/`

## ğŸ”® í–¥í›„ ì¶”ê°€ë  ê¸°ëŠ¥

### â‘¢ ë‹¨ê³¨ ë¦¬ë§ˆì¼€íŒ… (CRM)
```sql
customers              -- ê³ ê° DB
customer_segments      -- ì„¸ê·¸ë¨¼íŠ¸ ë¶„ë¥˜
marketing_campaigns    -- ìº í˜ì¸ ê´€ë¦¬
campaign_history       -- ë°œì†¡ ì´ë ¥
```

### â‘¥â‘¦ ë§¤ì¶œ/ìœ ì… ë¶„ì„
```sql
sales_data            -- ë§¤ì¶œ ë°ì´í„°
traffic_sources       -- ìœ ì… ê²½ë¡œ
conversion_tracking   -- ì „í™˜ ì¶”ì 
```

### â‘§ SNS ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§
```sql
sns_mentions          -- ì¸ìŠ¤íƒ€/ë¸”ë¡œê·¸ ì–¸ê¸‰
sentiment_analysis    -- ê°ì„± ë¶„ì„
trending_keywords     -- íŠ¸ë Œë”© í‚¤ì›Œë“œ
```

### â‘¤ ë‚ ì”¨ë³„ ë©”ë‰´ ì¶”ì²œ
```sql
weather_campaigns     -- ë‚ ì”¨ ê¸°ë°˜ ìº í˜ì¸
weather_history       -- ë‚ ì”¨ë³„ ì„±ê³¼ ì´ë ¥
```

### â‘© AI ì±—ë´‡ ì–´ë“œë°”ì´ì €
```sql
chat_sessions         -- ëŒ€í™” ì„¸ì…˜
chat_messages         -- ë©”ì‹œì§€ ì´ë ¥
recommendations       -- ì¶”ì²œ ë‚´ì—­
```

## ğŸ›¡ï¸ ë³´ì•ˆ (RLS)

ëª¨ë“  í…Œì´ë¸”ì€ **Row Level Security (RLS)** ì •ì±…ì´ ì ìš©ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

- **íšŒì›:** ë³¸ì¸ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥
- **ê´€ë¦¬ì:** ëª¨ë“  ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥
- **ì‹œìŠ¤í…œ (service_role):** ë°ì´í„° ì‚½ì…/ê´€ë¦¬ ê°€ëŠ¥

## ğŸ“ ìŠ¤í‚¤ë§ˆ ì ìš© ë°©ë²•

### 1. Supabase SQL Editor ì‚¬ìš©
```bash
# 1. Supabase ëŒ€ì‹œë³´ë“œ â†’ SQL Editor
# 2. ê° ìŠ¤í‚¤ë§ˆ íŒŒì¼ ë‚´ìš© ë³µì‚¬
# 3. ì‹¤í–‰ (Run)
```

### 2. ìˆœì„œ
1. **Core í…Œì´ë¸”** ë¨¼ì €
   - profiles, users
   
2. **ê¸°ëŠ¥ë³„ í…Œì´ë¸”** ìˆœì°¨ì ìœ¼ë¡œ
   - blog â†’ review â†’ store â†’ cache
   
3. **ëª¨ë‹ˆí„°ë§ í…Œì´ë¸”** (ì„ íƒ)
   - admin/sql/monitoring/ ì°¸ì¡°

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜

í–¥í›„ ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ:
1. `database/migrations/YYYYMMDD_description.sql` í˜•ì‹ìœ¼ë¡œ ìƒì„±
2. ë³€ê²½ ë‚´ì—­ ê¸°ë¡
3. ë¡¤ë°± ìŠ¤í¬ë¦½íŠ¸ í¬í•¨

## ğŸ“š ì°¸ê³  ë¬¸ì„œ

- **ì–´ë“œë¯¼/ëª¨ë‹ˆí„°ë§:** `admin/sql/README.md`
- **ì „ì²´ êµ¬ì¡°:** `docs/AI_START_HERE.md`
- **ë°°í¬ ê°€ì´ë“œ:** `docs/DEPLOY_GUIDE.md`

