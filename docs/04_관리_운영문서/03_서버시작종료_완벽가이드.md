# 🚀 서버 시작/종료 완벽 가이드

> 사장픽 로컬 개발 환경 서버 운영  
> 최종 업데이트: 2025년 11월 8일

---

## 📌 빠른 요약

### 가장 간단한 방법
```
1. 프로젝트 폴더에서 "서버시작.bat" 더블클릭
2. 브라우저에서 http://localhost:3003/ChatGPT.html 접속
3. 종료할 때: 터미널에서 Ctrl + C
```

---

## 🚀 서버 시작 방법 (3가지)

### ✅ 방법 1: 배치 파일 사용 (가장 간단) ⭐

**1단계: 배치 파일 실행**
1. 프로젝트 폴더를 Windows 탐색기에서 엽니다
2. `서버시작.bat` 파일을 **더블클릭**
3. 검은색 터미널 창이 열립니다

**2단계: 서버 시작 확인**
```
🚀 통합 API 서버가 시작되었습니다!
🌐 서버 주소: http://0.0.0.0:3003
🏥 서버 상태: http://0.0.0.0:3003/health
📊 환경: development
```

**3단계: 브라우저에서 접속**
```
http://localhost:3003/ChatGPT.html
```

---

### ✅ 방법 2: VS Code 터미널에서 실행

**1단계: VS Code 터미널 열기**
- VS Code 하단에 "터미널" 탭 클릭
- 또는 키보드: `Ctrl + `` ` (백틱)

**2단계: 명령어 입력**
```bash
node server.js
```

**3단계: 서버 시작 확인**
- 터미널에 "서버가 시작되었습니다" 메시지 확인

**4단계: 브라우저 접속**
```
http://localhost:3003/ChatGPT.html
```

---

### ✅ 방법 3: 명령 프롬프트(cmd) 또는 PowerShell에서 실행

**1단계: 터미널 열기**

#### PowerShell 사용 시:
```powershell
# Windows 키 + X → PowerShell 클릭
또는
# VS Code에서 Ctrl + `
```

#### 명령 프롬프트(cmd) 사용 시:
```
Windows 키 + R
cmd 입력하고 Enter
```

**2단계: 프로젝트 폴더로 이동**
```bash
cd "C:\Users\사용자이름\Desktop\sajangpick"
```

**3단계: 서버 실행**
```bash
node server.js
```

**4단계: 서버 시작 메시지 확인**
```
🚀 통합 API 서버가 시작되었습니다!
🌐 서버 주소: http://0.0.0.0:3003
```

---

## 🔄 서버 재시작 방법

### 상황 1: 코드 변경 후 반영하고 싶을 때

**1단계: 기존 서버 종료**
- 서버가 실행 중인 터미널 창에서 **`Ctrl + C`** 입력
- 커서가 다시 나타나면 성공

**2단계: 서버 다시 시작**
```bash
node server.js
```

또는 배치 파일을 다시 더블클릭

---

### 상황 2: 터미널이 여러 개일 때

1. 각 터미널 창을 확인하며 서버가 실행 중인 창 찾기
2. 그 창에서 `Ctrl + C` 입력하여 종료
3. 같은 창에서 `node server.js` 재실행

---

## 🛑 서버 종료 방법

### 방법 1: 터미널에서 종료
- 서버가 실행 중인 터미널 창에서 **`Ctrl + C`** 입력
- 확인 메시지가 보이면 입력

### 방법 2: 터미널 창 닫기
- 터미널 창의 X 버튼을 클릭
- (단, 이 방법은 권장하지 않음)

---

## ✅ 서버 상태 확인

### 1️⃣ 서버가 실행 중인지 확인

**브라우저에서 다음 URL을 엽니다:**
```
http://localhost:3003/health
```

**성공 시 (OK 응답):**
```json
{
  "status": "OK",
  "message": "통합 API 서버가 정상 작동 중입니다."
}
```

**실패 시 (연결 거부):**
```
ERR_CONNECTION_REFUSED
또는
사이트에 연결할 수 없습니다
```
→ 서버가 실행되지 않은 상태입니다. 위의 시작 방법을 다시 확인하세요.

---

### 2️⃣ API 정상 작동 확인

**브라우저에서 다음 URL을 엽니다:**
```
http://localhost:3003/api/related-keywords?seed=테스트
```

**성공 시:**
- JSON 응답이 보임 (네이버 API 키가 설정되어 있어야 함)

**실패 시:**
- 404 오류 → 서버 미실행
- 500 오류 → API 키 미설정

---

## 🔍 문제 해결 완전 가이드

### ❌ 문제 1: "node를 찾을 수 없습니다" 오류

**원인:** Node.js가 설치되지 않음

**확인 방법:**
```bash
node --version
```

**해결:**
1. [Node.js 공식 사이트](https://nodejs.org/) 방문
2. LTS 버전 (18.x 이상) 다운로드
3. 설치 마법사 실행 (모든 기본값 선택)
4. 컴퓨터 재시작
5. 다시 시도

---

### ❌ 문제 2: "포트가 이미 사용 중입니다" 오류

**원인:** 다른 프로그램이 3003 포트를 사용 중 (보통 이전 서버가 아직 실행 중)

**확인 방법:**
```bash
# Windows에서 포트 사용 프로그램 확인
netstat -ano | findstr :3003
```

**해결 방법 1: 기존 프로세스 종료**
1. 모든 터미널 창 확인
2. 검은색 창이 있으면 `Ctrl + C` 입력
3. 다시 시도

**해결 방법 2: 다른 포트 사용**
1. 프로젝트 폴더의 `.env` 파일 열기
2. 다음 줄 추가:
```
PORT=3004
```
3. 그후 브라우저에서 `http://localhost:3004/...` 접속

---

### ❌ 문제 3: "모듈을 찾을 수 없습니다" 오류

**원인:** 패키지가 설치되지 않음

**확인 방법:**
- 프로젝트 폴더에 `node_modules` 폴더가 있는지 확인

**해결:**
```bash
pnpm install
```

또는

```bash
npm install
```

---

### ❌ 문제 4: 서버는 시작되는데 연결이 안 됨

**확인 사항:**

1️⃣ **브라우저 주소 확인**
- ❌ `http://127.0.0.1:5501/...` (Live Server - 정적 파일만 제공)
- ✅ `http://localhost:3003/...` (Node.js 서버)

2️⃣ **터미널 메시지 확인**
- "서버가 시작되었습니다" 메시지가 보이는지 확인
- 오류 메시지가 있으면 그것을 참고

3️⃣ **브라우저 캐시 삭제**
- 브라우저에서 F5 또는 Ctrl + Shift + Delete (캐시 삭제)

---

### ❌ 문제 5: 환경변수 설정 문제

**원인:** `.env` 파일이 없거나 API 키가 미설정

**확인:**
1. 프로젝트 폴더에 `.env` 파일이 있는지 확인
2. 파일 내용에 필요한 API 키가 있는지 확인

**필수 환경변수 예시:**
```
OPENAI_API_KEY=your_key_here
NAVER_CUSTOMER_ID=your_id_here
NAVER_API_KEY=your_key_here
```

---

## 📝 체크리스트

### 서버 시작 전 확인
- [ ] Node.js 설치됨 (`node --version` 확인)
- [ ] 패키지 설치됨 (`node_modules` 폴더 존재)
- [ ] `.env` 파일 존재 (선택사항)

### 서버 시작 중
- [ ] 터미널에 "서버가 시작되었습니다" 메시지 확인
- [ ] 터미널 창 열어둔 상태 유지
- [ ] 포트 3003 사용 중

### 서버 테스트
- [ ] `http://localhost:3003/health` 에서 OK 응답 확인
- [ ] `http://localhost:3003/api/related-keywords?seed=테스트` 테스트
- [ ] ChatGPT.html 또는 naver_search.html 정상 작동 확인

---

## ⚠️ 중요 주의사항

### 1️⃣ 터미널 창 닫기 금지!
- 서버를 실행한 터미널 창을 닫으면 **서버가 즉시 종료**됩니다
- 서버를 사용하는 동안은 반드시 **열어둬야** 합니다

### 2️⃣ 여러 개 서버 실행 금지
- 동시에 여러 개의 서버를 실행하면 포트 충돌 발생
- 기존 서버를 종료한 후 새로 시작하세요

### 3️⃣ Live Server와 Node.js 구분
- Live Server (포트 5501): **정적 파일만** 제공
- Node.js 서버 (포트 3003): **API 처리** 가능
- 반드시 포트 3003에서 접속해야 API 호출 가능

---

## 💡 빠른 명령어 레퍼런스

| 작업 | 명령어 |
|------|--------|
| 서버 시작 | `node server.js` |
| 서버 종료 | `Ctrl + C` |
| 패키지 설치 | `pnpm install` |
| 서버 상태 확인 | 브라우저: `http://localhost:3003/health` |
| API 테스트 | 브라우저: `http://localhost:3003/api/related-keywords?seed=테스트` |

---

## 📞 도움말

### 서버 시작이 안 될 때
1. Node.js 설치 확인
2. 패키지 설치 (`pnpm install`)
3. 포트 3003 사용 중인지 확인
4. 오류 메시지 읽어보기

### 연결이 안 될 때
1. 브라우저 주소 다시 확인
2. 터미널 메시지 다시 확인
3. 브라우저 새로고침 (F5)
4. 서버 재시작

### 그 외 문제
- 터미널의 오류 메시지를 읽고 검색하기
- 스크린샷으로 기록하기
- 관리자에게 보고하기

---

**마지막 업데이트**: 2025년 11월 8일  
**다음 파일 참고**: 
- `docs/02_기술_API참고/04_API오류_해결가이드.md`
- `docs/03_개발_진행현황/02_로컬개발환경_테스트.md`

