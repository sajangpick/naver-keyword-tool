# 🧪 로컬 개발 환경 테스트 가이드

> ChatGPT 기능 로컬 테스트  
> 최종 업데이트: 2025년 11월 8일

---

## ⚠️ 현재 문제

현재 `127.0.0.1:5501`(Live Server)에서 접속 중이지만, Express 서버가 실행되지 않아 API 연결이 안 됩니다.

---

## ✅ 올바른 테스트 방법

### 🚀 필수 준비: 서버 실행

먼저 Node.js 서버를 실행해야 합니다.

**터미널에서:**
```bash
node server.js
```

또는 배치 파일 실행:
```
서버시작.bat 더블클릭
```

서버 시작 메시지:
```
🚀 통합 API 서버가 시작되었습니다!
🌐 서버 주소: http://0.0.0.0:3003
```

---

## 🧪 테스트 방법 1: ChatGPT.html 페이지 테스트

### 1단계: 서버 실행
```bash
node server.js
```

### 2단계: 브라우저에서 접속
```
http://localhost:3003/ChatGPT.html
```

### 3단계: 테스트 진행

**확인 사항:**
1. 페이지가 정상적으로 로드되는지 확인
2. 연결 상태가 "연결됨"으로 표시되는지 확인 (초록색)

**테스트 질문 입력:**
```
- "최근 소상공인 지원금에 대한 뉴스를 알려줘"
- "김치찌개 레시피 알려줘"
- "창업 지원금 정책이 있나요?"
```

**예상 응답:**
- AI가 자연스러운 한국어로 답변 제공
- 약 3-5초 내에 응답

---

## 🧪 테스트 방법 2: 테스트 HTML 파일 사용

### 1단계: 서버 실행
```bash
node server.js
```

### 2단계: 테스트 페이지 접속
```
http://localhost:3003/test-chat-function-calling.html
```

### 3단계: 각 테스트 케이스 실행

페이지의 각 버튼을 클릭하여 자동 테스트 진행:
- "테스트 1" 버튼 클릭
- "테스트 2" 버튼 클릭
- ... (필요한 모든 테스트)

**결과 확인:**
- 각 테스트의 요청/응답이 콘솔에 표시됨
- 오류가 있으면 빨간색으로 표시됨

---

## 🔍 문제 해결

### ❌ 문제 1: "포트가 이미 사용 중입니다" 오류

**원인:** 다른 프로그램이 3003 포트를 사용 중

**해결:**
```bash
# Windows에서 포트 사용 확인
netstat -ano | findstr :3003

# 사용 중인 프로세스 종료 또는 다른 포트 사용
# .env 파일에 PORT=3004 추가하거나
# server.js에서 PORT 번호 변경
```

---

### ❌ 문제 2: "모듈을 찾을 수 없습니다" 오류

**원인:** 패키지가 설치되지 않음

**해결:**
```bash
pnpm install
```

---

### ❌ 문제 3: "OpenAI API 키가 설정되지 않았습니다" 오류

**원인:** 환경 변수가 설정되지 않음

**해결:**
1. 프로젝트 루트에 `.env` 파일 생성 또는 확인
2. 다음 내용 추가:
```
OPENAI_API_KEY=your_openai_api_key_here
```

---

### ❌ 문제 4: 서버는 실행되는데 연결이 안 됨

**확인사항:**
1. 브라우저 주소가 `http://localhost:3003/...` 인지 확인
   - ❌ `http://127.0.0.1:5501/...` (Live Server - API 불가)
   - ✅ `http://localhost:3003/...` (Node.js 서버 - API 가능)
2. 서버가 정상 실행 중인지 확인 (터미널 메시지 확인)
3. 브라우저 콘솔(F12)에서 오류 확인

---

## 📝 테스트 체크리스트

### 테스트 전 준비
- [ ] 서버가 실행 중 (`pnpm start` 또는 `node server.js`)
- [ ] 브라우저 주소가 `http://localhost:3003/...`
- [ ] `.env` 파일에 `OPENAI_API_KEY` 설정됨
- [ ] 연결 상태가 "연결됨"으로 표시됨 (초록색)

### 기능 테스트
- [ ] ChatGPT.html 페이지 로드 성공
- [ ] "연결됨" 메시지 표시
- [ ] 테스트 질문 입력 후 응답 확인
- [ ] 응답 시간이 합리적 (3-5초)

### 오류 처리
- [ ] 잘못된 질문에 대한 에러 처리 확인
- [ ] 타임아웃 에러 처리 확인
- [ ] API 오류 메시지 표시 확인

---

## 🎯 빠른 테스트

### 1분 안에 테스트하기

```bash
# 1. 서버 실행
pnpm start

# 2. 다른 터미널에서 (또는 브라우저에서):
# 브라우저에 다음 주소 입력:
http://localhost:3003/ChatGPT.html

# 3. 페이지 로드 확인 후:
# 질문 입력: "안녕하세요"

# 4. 응답 확인
```

---

## 💡 참고

### Live Server vs Node.js 서버

| 기능 | Live Server (5501) | Node.js 서버 (3003) |
|------|-------------------|-------------------|
| 정적 파일 | ✅ | ✅ |
| API 호출 | ❌ | ✅ |
| JavaScript 실행 | ✅ | ✅ |
| 데이터베이스 연결 | ❌ | ✅ |
| 환경변수 | ❌ | ✅ |

### 테스트 시 포트 확인
- **5501**: VS Code Live Server (정적 파일만)
- **3003**: Node.js Express 서버 (API 포함) ← **ChatGPT 테스트는 여기!**

---

## 🆘 추가 도움

### 서버가 실행되지 않을 때
1. 노드 버전 확인: `node --version` (18.x 이상 필요)
2. 패키지 설치: `pnpm install`
3. 포트 확인: `netstat -ano | findstr :3003`

### 테스트가 안 될 때
1. 브라우저 콘솔(F12) 열기
2. 네트워크 탭에서 요청/응답 확인
3. 오류 메시지 스크린샷
4. 관리자에게 보고

---

**마지막 업데이트**: 2025년 11월 8일  
**관련 문서**: 
- `docs/04_관리_운영문서/03_서버시작종료_완벽가이드.md`
- `docs/02_기술_API참고/04_API오류_해결가이드.md`

