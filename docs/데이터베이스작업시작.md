
슈퍼베이스(Supabase) 데이터베이스 스키마 설계

소상공인 에이전트 프로그램 구축을 위해 Supabase를 선택하신 것을 환영합니다! Supabase는 PostgreSQL을 기반으로 하여 안정적이고 강력한 기능을 제공하며, 인증, 실시간 데이터 등 다양한 기능을 통합하여 개발 속도를 높일 수 있습니다.

요청하신 주요 3가지 기능(영수증 리뷰 작성, 블로그 작업, 네이버 파워클릭 광고지원)을 지원하기 위한 데이터베이스의 기본 구조를 설계하겠습니다.

1. 사용자 관리 (Authentication & User Profile)
Supabase의 내장 인증 기능을 활용하여 카카오톡 로그인을 관리하고, 별도의 테이블을 통해 사용자 등급 및 구독 정보를 관리합니다.

users 테이블 (Supabase Auth에서 관리):
Supabase의 기본 auth.users 테이블을 활용하며, 추가 정보는 profiles 테이블에 저장합니다.

profiles 테이블 (사용자 추가 정보 및 등급 관리):
컬럼명	데이터 타입	설명	제약 조건
id	uuid	Supabase auth.users의 id와 1:1 매칭되는 기본 키	Primary Key, Foreign Key (auth.users.id)
name	text	사용자 이름/별명	
business_name	text	등록된 사업장 이름 (에이전트 프로그램 관리 대상)	
kakao_id	text	카카오톡 로그인 ID (인증 확인용)	Unique
membership_level	text	회원 등급 (free, standard, premium 등)	Not Null, Default: 'free'
monthly_blog_limit	integer	월간 블로그 작성 가능 횟수	Not Null, Default: 0
monthly_review_limit	integer	월간 리뷰 답글 작성 가능 횟수	Not Null, Default: 0
last_payment_date	timestamp with time zone	마지막 결제일	
created_at	timestamp with time zone	생성 시간	Default: now()
2. 영수증 리뷰 작성 관리 (Receipt Review Management)
가장 먼저 구축을 요청하신 영수증 리뷰 답글 자동 생성 및 저장을 위한 테이블 스키마입니다.

review_responses 테이블 (영수증 리뷰 및 AI 답글 저장):
컬럼명	데이터 타입	설명	제약 조건
id	uuid	기본 키	Primary Key, Default: uuid_generate_v4()
user_id	uuid	이 리뷰 작업을 생성한 사용자 ID	Not Null, Foreign Key (profiles.id)
naver_place_url	text	네이버 플레이스 URL 주소 (place_id 포함)	Not Null
owner_keywords	text[]	사장님 추천 키워드 (배열 형식으로 복수 저장)	
customer_review	text	고객이 작성한 실제 리뷰 내용	Not Null
ai_response	text	AI가 생성한 답글 내용	Not Null
is_completed	boolean	답글 생성이 완료되었는지 여부	Not Null, Default: TRUE
created_at	timestamp with time zone	생성 시간	Default: now()
데이터 타입 설명:

naver_place_url: 네이버 플레이스 URL을 저장합니다. (예: https://m.place.naver.com/restaurant/1390003666)

owner_keywords: 사장님 추천 키워드는 여러 개가 될 수 있으므로, PostgreSQL의 text[] (텍스트 배열) 타입이 유용합니다. (예: ['갈비탕', '친절', '신선한 재료'])

3. 추가 기능 스키마 (향후 확장)
현재는 영수증 리뷰에 초점을 맞추지만, 향후 기능을 위해 관련 테이블 구조를 간단히 정리합니다.

blog_posts 테이블 (블로그 작업 관리):
컬럼명	데이터 타입	설명	제약 조건
id	uuid	기본 키	Primary Key
user_id	uuid	작성 요청 사용자 ID	Foreign Key (profiles.id)
target_platform	text	목표 플랫폼 (예: 'Naver Blog')	Not Null
keywords	text[]	주요 블로그 키워드 목록	
blog_title	text	AI 생성 또는 사용자 입력 제목	
blog_content	text	생성된 블로그 본문 내용	
status	text	진행 상태 (pending, draft, published 등)	Not Null
created_at	timestamp with time zone	생성 시간	
ad_keywords 테이블 (네이버 파워클릭 키워드 관리):
컬럼명	데이터 타입	설명	제약 조건
id	uuid	기본 키	Primary Key
user_id	uuid	키워드 관리 사용자 ID	Foreign Key (profiles.id)
keyword	text	광고 키워드	Not Null, Unique
monthly_search_volume	integer	월간 검색량 데이터	
competition_level	text	경쟁 강도 (예: 'low', 'medium', 'high')	
last_analysis_date	date	마지막 분석일	
created_at	timestamp with time zone	생성 시간	
이 스키마는 Supabase에서 PostgreSQL 데이터베이스를 설정할 때 바로 적용할 수 있는 기본 구조입니다. review_responses 테이블을 시작으로 기능을 확장해 나가시면 됩니다.