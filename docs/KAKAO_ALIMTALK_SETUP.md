# 📱 카카오 알림톡 설정 가이드

> 리뷰 모니터링 시스템에서 카카오 알림톡을 사용하기 위한 설정 가이드

---

## 🎯 개요

**카카오 알림톡이란?**
- 비즈니스가 고객에게 보내는 공식 알림 메시지
- 메시지당 6-15원 비용
- 높은 도달률과 신뢰도

**우리 서비스 적용:**
- 새로운 리뷰 알림
- 긴급 리뷰(1-2점) 즉시 알림
- 일일 리뷰 요약

---

## 📝 사전 준비물

1. ✅ **사업자등록증** (필수!)
2. ✅ **카카오 계정**
3. ✅ **전화번호**
4. ⏰ **시간: 1-2일** (비즈니스 인증 + 템플릿 승인)

---

## 🔧 Step 1: 카카오 비즈니스 채널 생성

### 1-1. 카카오 채널 관리자 센터 접속

```
https://center-pf.kakao.com/
```

### 1-2. 채널 만들기

1. **[새 채널 만들기]** 클릭
2. **채널 정보 입력:**
   ```
   채널명: 사장픽
   검색용 ID: @sajangpick (선택)
   카테고리: IT/인터넷 > 플랫폼/솔루션
   ```

3. **채널 프로필 설정:**
   - 프로필 이미지 업로드
   - 채널 소개: "식당 사장님을 위한 스마트 리뷰 관리"

### 1-3. 비즈니스 인증 (필수!)

1. **[관리 → 비즈니스 인증]** 메뉴
2. **사업자등록증 업로드**
   - 파일 형식: PDF, JPG
   - 용량: 10MB 이하
3. **승인 대기: 1-2일**

✅ **인증 완료되면 이메일 알림 받음**

---

## 🔧 Step 2: 카카오 발신 프로필 등록

### 2-1. Kakao Developers 접속

```
https://developers.kakao.com
```

### 2-2. 앱 설정

1. **내 애플리케이션 → 사장픽** 선택
2. **제품 설정 → 카카오톡 채널**
3. **[채널 추가]** 클릭
4. **Step 1에서 만든 채널 선택**

### 2-3. 알림톡 활성화

1. **제품 설정 → 카카오 알림톡**
2. **[사용 설정]** ON
3. **발신 프로필 등록:**
   - 발신 프로필 ID: 채널 ID (@sajangpick)
   - 카테고리: 리뷰 알림

---

## 🔧 Step 3: 알림톡 템플릿 등록

### 3-1. 카카오 비즈니스 폼 접속

```
https://business.kakao.com/dashboard/
```

또는

```
카카오톡 채널 관리자 센터 → 알림톡 관리
```

### 3-2. 템플릿 등록

#### 템플릿 1: 긴급 리뷰 알림 (1-2점)

```
템플릿명: urgent_review_alert
템플릿 코드: review_urgent_001

템플릿 내용:
━━━━━━━━━━━━━━━━━━━━
🚨 긴급 리뷰 알림

[#{place_name}]에 #{rating}점 리뷰가 등록되었습니다.

"#{review_content}"

작성자: #{reviewer_name}
작성일: #{reviewed_at}

지금 바로 답글을 달아 상황을 개선하세요!
━━━━━━━━━━━━━━━━━━━━

버튼:
[답글 작성하기] → https://www.sajangpick.co.kr/mypage.html#reviews
```

**변수:**
- `#{place_name}` : 가게명
- `#{rating}` : 별점
- `#{review_content}` : 리뷰 내용 (50자)
- `#{reviewer_name}` : 작성자
- `#{reviewed_at}` : 작성일

#### 템플릿 2: 고평점 리뷰 알림 (5점)

```
템플릿명: high_rating_alert
템플릿 코드: review_high_001

템플릿 내용:
━━━━━━━━━━━━━━━━━━━━
⭐⭐⭐⭐⭐ 5점 리뷰!

[#{place_name}]에 만점 리뷰가 등록되었습니다.

"#{review_content}"

작성자: #{reviewer_name}
작성일: #{reviewed_at}

감사 답글을 작성해서 고객 만족도를 높이세요!
━━━━━━━━━━━━━━━━━━━━

버튼:
[답글 작성하기] → https://www.sajangpick.co.kr/mypage.html#reviews
```

#### 템플릿 3: 일일 리뷰 요약

```
템플릿명: daily_summary
템플릿 코드: review_summary_001

템플릿 내용:
━━━━━━━━━━━━━━━━━━━━
📊 오늘의 리뷰 요약

[#{place_name}]

신규 리뷰: #{new_reviews}개
평균 평점: #{avg_rating}점
긴급 리뷰: #{urgent_reviews}개
답글 대기: #{pending_replies}개

오늘도 고객 관리 화이팅!
━━━━━━━━━━━━━━━━━━━━

버튼:
[자세히 보기] → https://www.sajangpick.co.kr/mypage.html#reviews
```

### 3-3. 템플릿 승인 대기

- **소요 시간: 1-2일**
- **승인 결과: 이메일 알림**
- **반려 시: 수정 후 재신청**

---

## 🔧 Step 4: API 키 발급

### 4-1. Kakao Developers 접속

```
https://developers.kakao.com
```

### 4-2. REST API 키 복사

1. **내 애플리케이션 → 사장픽**
2. **앱 키 → REST API 키** 복사
3. **`.env` 파일에 추가:**

```bash
# Kakao Alimtalk
KAKAO_REST_API_KEY=your_rest_api_key
KAKAO_SENDER_KEY=your_sender_key  # 채널 ID
```

### 4-3. Sender Key 확인

1. **제품 설정 → 카카오 알림톡**
2. **발신 프로필 키(Sender Key)** 복사

---

## 💰 비용 안내

### 메시지 단가

| 템플릿 타입 | 비용 |
|------------|------|
| 알림톡 (일반) | 6원 |
| 알림톡 (친구톡) | 8원 |
| 친구톡 (이미지) | 12원 |

### 예상 비용

**월 1,000명 회원 기준:**

```
1명당 하루 평균 리뷰: 2개
긴급 알림: 1명당 월 5회
일일 요약: 1명당 월 30회

월 발송량:
- 긴급 알림: 1,000명 × 5회 = 5,000건
- 일일 요약: 1,000명 × 30회 = 30,000건
- 총: 35,000건

월 비용: 35,000건 × 6원 = 210,000원 (약 21만원)
```

**실제 비용은 더 적을 수 있음:**
- 모든 회원이 매일 리뷰를 받지 않음
- 설정으로 발송 빈도 조절 가능

---

## ✅ 완료 체크리스트

### Phase 1: 설정 (1-2일)
- [ ] 카카오 비즈니스 채널 생성
- [ ] 사업자등록증 업로드 (비즈니스 인증)
- [ ] 인증 완료 대기
- [ ] Kakao Developers에 채널 연동
- [ ] 알림톡 활성화

### Phase 2: 템플릿 (1-2일)
- [ ] 긴급 리뷰 알림 템플릿 등록
- [ ] 고평점 리뷰 알림 템플릿 등록
- [ ] 일일 요약 템플릿 등록
- [ ] 템플릿 승인 대기
- [ ] 승인 완료 확인

### Phase 3: API 연동 (개발)
- [ ] REST API 키 복사
- [ ] Sender Key 복사
- [ ] .env 파일 설정
- [ ] API 코드 작성
- [ ] 테스트 발송

---

## 🧪 테스트

### 테스트 발송

템플릿 승인 후:

1. **카카오 비즈니스 폼에서 테스트**
   - 템플릿 관리 → 테스트 발송
   - 본인 전화번호로 테스트

2. **API로 테스트**
   ```bash
   curl -X POST https://www.sajangpick.co.kr/api/kakao-alimtalk \
     -H "Content-Type: application/json" \
     -d '{
       "phone": "01012345678",
       "template_code": "review_urgent_001",
       "variables": {
         "place_name": "테스트 식당",
         "rating": "2",
         "review_content": "테스트 리뷰입니다",
         "reviewer_name": "홍길동",
         "reviewed_at": "2025-10-30"
       }
     }'
   ```

---

## 📚 참고 자료

- **카카오 알림톡 가이드:** https://developers.kakao.com/docs/latest/ko/message/message-template
- **비즈니스 채널 관리:** https://center-pf.kakao.com/
- **카카오 비즈니스 폼:** https://business.kakao.com/

---

## 🆘 문제 해결

### 템플릿 반려되는 경우

**흔한 이유:**
1. 광고성 문구 포함
2. 외부 링크 부적절
3. 변수 사용 오류
4. 이모지 과다 사용

**해결:**
- 가이드라인 확인: https://kakaobusiness.gitbook.io/main/
- 반려 사유 확인 후 수정
- 재신청

---

**작성일:** 2025-10-30  
**업데이트:** 템플릿 승인 후 API 개발 진행

