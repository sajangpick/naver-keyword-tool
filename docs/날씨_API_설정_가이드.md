# 🌤️ 날씨 API 설정 가이드

## 개요

ChatGPT와 유사한 구조화된 날씨 정보를 제공하기 위해 OpenWeatherMap API를 사용합니다.

## OpenWeatherMap API 키 발급

### 1. 회원가입
1. [OpenWeatherMap 웹사이트](https://openweathermap.org/api) 접속
2. "Sign Up" 클릭하여 무료 계정 생성
3. 이메일 인증 완료

### 2. API 키 발급
1. 로그인 후 [API Keys 페이지](https://home.openweathermap.org/api_keys)로 이동
2. "Create key" 클릭
3. Key name 입력 (예: "사장픽 날씨 API")
4. "Generate" 클릭
5. 생성된 API 키 복사

### 3. 환경 변수 설정

프로젝트 루트의 `.env` 파일에 추가:

```env
OPENWEATHER_API_KEY=your_api_key_here
```

또는 Vercel/Render 배포 시:
- 환경 변수 섹션에서 `OPENWEATHER_API_KEY` 추가

## 무료 플랜 제한사항

- **1분당 요청**: 60회
- **일일 요청**: 1,000,000회 (충분함)
- **현재 날씨**: 지원
- **5일 예보**: 지원 (3시간 간격)
- **시간별 예보**: 무료 플랜에서는 제한적 (현재 코드는 5일 예보에서 오늘 데이터만 추출)

## 지원 도시

다음 한국 도시들이 자동으로 매핑됩니다:

- 서울, 부산, 대구, 인천, 광주, 대전, 울산
- 수원, 고양, 용인, 성남, 부천, 안산, 안양
- 평택, 시흥, 김포, 의정부, 광명, 파주
- 이천, 오산, 구리, 안성, 포천, 의왕
- 하남, 여주, 양주, 과천, 가평, 연천
- 남양주, 화성

## 테스트

API 키 설정 후:

1. 서버 재시작
2. ChatGPT 페이지에서 날씨 질문:
   - "오늘 부산 날씨는?"
   - "서울 날씨 알려줘"
   - "대구 오늘 날씨는?"

## 문제 해결

### "날씨 API 키가 설정되지 않았습니다" 오류

**해결**: `.env` 파일에 `OPENWEATHER_API_KEY` 추가 후 서버 재시작

### "날씨 API 키가 유효하지 않습니다" 오류

**해결**: 
1. API 키가 올바른지 확인
2. OpenWeatherMap에서 API 키 활성화 확인 (이메일 인증 필요)
3. 무료 플랜 제한 초과 여부 확인

### 날씨 데이터가 정확하지 않음

**원인**: OpenWeatherMap의 데이터 정확도는 일반적으로 높지만, 실시간 업데이트에는 약간의 지연이 있을 수 있습니다.

## 대체 API 옵션

### 한국 기상청 API (공공데이터포털)
- 더 정확한 한국 날씨 데이터
- API 신청 필요
- 무료 사용 가능

### AccuWeather API
- 상세한 날씨 정보
- 무료 플랜: 50회/일

## 참고

- OpenWeatherMap 무료 플랜으로도 충분히 사용 가능합니다
- API 키는 외부에 노출되지 않도록 주의하세요
- `.env` 파일은 `.gitignore`에 포함되어 있어야 합니다

