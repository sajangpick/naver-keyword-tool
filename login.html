<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://*.supabase.co https://naver-keyword-tool.onrender.com http://127.0.0.1:* http://localhost:*; img-src 'self' data: https:; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; font-src 'self' data:; frame-ancestors 'self'; base-uri 'self'; form-action 'self'" />
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <title>ë¡œê·¸ì¸ - ì‚¬ì¥í”½</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23ff7b54'/%3E%3Ctext x='32' y='40' text-anchor='middle' font-size='28' font-family='Arial' fill='white'%3ESP%3C/text%3E%3C/svg%3E" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />
    <style>
      :root {
        --brand-primary: #ff7b54;
        --brand-primary-dark: #ff5c2e;
        --brand-ink: #201a17;
        --brand-muted: #7a6a60;
        --brand-cream: #fff7f0;
        --brand-line: rgba(255, 123, 84, 0.25);
        --brand-soft: #ffe3d5;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Pretendard Variable", Pretendard, "Noto Sans KR", Arial,
          sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        background: radial-gradient(
              circle at 15% 15%,
              rgba(255, 123, 84, 0.13),
              transparent 45%
            ),
          radial-gradient(
              circle at 85% 0%,
              rgba(255, 208, 188, 0.4),
              transparent 40%
            )
            var(--brand-cream);
        align-items: center;
        justify-content: center;
        padding: 32px 16px;
        color: var(--brand-ink);
      }

      .login-shell {
        width: 100%;
        max-width: 520px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .login-container {
        background: #fff;
        border-radius: 32px;
        border: 1px solid var(--brand-line);
        box-shadow: 0 40px 80px rgba(32, 26, 23, 0.08);
        padding: 48px 40px 36px;
        width: 100%;
        position: relative;
        overflow: hidden;
      }

      .login-container::after {
        content: "";
        position: absolute;
        inset: 18px -130px auto auto;
        width: 240px;
        height: 240px;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 123, 84, 0.25),
          transparent 60%
        );
        transform: rotate(25deg);
        pointer-events: none;
      }

      .login-container > * {
        position: relative;
        z-index: 1;
      }
      
      /* ë²„íŠ¼ì€ ë” ë†’ì€ z-indexë¡œ ì„¤ì • */
      .login-container > .social-login,
      .login-container .kakao-btn {
        z-index: 100 !important;
      }

      .back-btn {
        position: absolute;
        top: 22px;
        left: 22px;
        border: none;
        background: rgba(255, 123, 84, 0.08);
        color: var(--brand-primary);
        width: 42px;
        height: 42px;
        border-radius: 14px;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s ease, background 0.2s ease;
      }

      .back-btn:hover {
        transform: translateX(-3px);
        background: rgba(255, 123, 84, 0.15);
      }

      .brand-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        border-radius: 999px;
        background: rgba(255, 123, 84, 0.1);
        color: var(--brand-primary);
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 16px;
        margin-left: 64px; /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼(left: 22px + width: 42px)ê³¼ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì—¬ë°± ì¶”ê°€ */
      }

      .logo {
        text-align: left;
        font-size: 36px;
        font-weight: 900;
        color: var(--brand-ink);
        margin-bottom: 8px;
        letter-spacing: -0.02em;
      }

      .subtitle {
        color: var(--brand-muted);
        margin-bottom: 28px;
        font-size: 16px;
        line-height: 1.5;
      }

      .brand-hero {
        display: flex;
        gap: 16px;
        padding: 18px;
        border-radius: 24px;
        background: var(--brand-cream);
        border: 1px solid var(--brand-line);
        margin-bottom: 20px;
      }

      .brand-icon {
        width: 56px;
        height: 56px;
        border-radius: 18px;
        background: var(--brand-primary);
        color: #fff;
        font-weight: 800;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 12px 20px rgba(255, 123, 84, 0.35);
      }

      .brand-hero__title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
      }

      .brand-hero__desc {
        font-size: 14px;
        color: var(--brand-muted);
        line-height: 1.5;
      }

      .brand-benefits {
        list-style: none;
        margin-bottom: 28px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .brand-benefits li {
        display: flex;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 18px;
        border: 1px solid rgba(32, 26, 23, 0.06);
        background: #fff;
        box-shadow: inset 0 0 0 1px rgba(255, 123, 84, 0.06);
      }

      .brand-benefits span {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        background: rgba(255, 123, 84, 0.12);
        color: var(--brand-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }

      .benefit-title {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .benefit-desc {
        font-size: 13px;
        color: var(--brand-muted);
        line-height: 1.4;
      }

      .form-group {
        margin-bottom: 20px;
        position: relative;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--brand-ink);
      }

      .form-input {
        width: 100%;
        padding: 15px;
        border: 2px solid rgba(32, 26, 23, 0.08);
        border-radius: 14px;
        font-size: 16px;
        transition: border-color 0.3s, box-shadow 0.3s;
        background: var(--brand-cream);
      }

      .form-input:focus {
        outline: none;
        border-color: var(--brand-primary);
        box-shadow: 0 0 0 4px rgba(255, 123, 84, 0.18);
      }

      .form-input.valid {
        border-color: #22c55e;
      }

      .form-input.invalid {
        border-color: #ff6b6b;
      }

      .validation-message {
        font-size: 12px;
        margin-top: 5px;
        min-height: 18px;
      }

      .validation-message.valid {
        color: #16a34a;
      }

      .validation-message.invalid {
        color: #dc2626;
      }

      .social-login {
        display: flex;
        flex-direction: column;
        gap: 14px;
        position: relative;
        z-index: 100;
        pointer-events: auto;
        isolation: isolate;
      }

      .kakao-btn {
        width: 100%;
        padding: 16px;
        border-radius: 18px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: linear-gradient(
          135deg,
          #fee500 0%,
          #fde768 55%,
          #fee500 100%
        );
        color: #3c1e1e;
        font-size: 16px;
        font-weight: 700;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 6px;
        cursor: pointer !important;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        position: relative;
        z-index: 100;
        pointer-events: auto !important;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }
      
      .kakao-btn-content {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        pointer-events: none;
      }
      
      .kakao-btn-desc {
        pointer-events: none;
      }

      .kakao-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 24px rgba(253, 231, 104, 0.45);
      }

      .kakao-emoji {
        font-size: 18px;
      }

      .kakao-btn-desc {
        font-size: 12px;
        font-weight: 400;
        color: rgba(60, 30, 30, 0.65);
        display: block;
      }

      .signup-link {
        text-align: center;
        margin-top: 32px;
        padding-top: 22px;
        border-top: 1px dashed var(--brand-line);
        color: var(--brand-muted);
        font-size: 14px;
      }

      .signup-link a {
        color: var(--brand-primary);
        text-decoration: none;
        font-weight: 700;
        margin-left: 6px;
      }

      .signup-link a:hover {
        text-decoration: underline;
      }

      .error-message,
      .success-message {
        padding: 12px 14px;
        border-radius: 14px;
        margin-bottom: 16px;
        font-size: 14px;
        display: none;
      }

      .error-message {
        background: rgba(255, 107, 107, 0.12);
        border: 1px solid rgba(255, 107, 107, 0.4);
        color: #b42318;
      }

      .success-message {
        background: rgba(34, 197, 94, 0.12);
        border: 1px solid rgba(34, 197, 94, 0.4);
        color: #047857;
      }

      .loading {
        display: none;
        text-align: center;
        margin: 24px 0 10px;
        color: var(--brand-muted);
        font-size: 14px;
      }

      .spinner {
        border: 3px solid rgba(0, 0, 0, 0.06);
        border-top: 3px solid var(--brand-primary);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        animation: spin 1s linear infinite;
        margin: 0 auto 12px;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 24px 12px;
        }

        .login-container {
          padding: 36px 24px 28px;
          border-radius: 24px;
        }

        .brand-pill {
          margin-left: 60px; /* ëª¨ë°”ì¼ì—ì„œë„ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ê³¼ ê²¹ì¹˜ì§€ ì•Šë„ë¡ */
        }

        .brand-hero {
          flex-direction: column;
        }
      }

      @media (max-width: 480px) {
        .login-container {
          padding: 32px 20px 24px;
        }

        .logo {
          font-size: 30px;
        }

        .brand-icon {
          width: 48px;
          height: 48px;
        }

        .brand-benefits li {
          flex-direction: column;
        }
      }

      @media (max-width: 360px) {
        body {
          padding: 16px 10px;
        }

        .login-container {
          padding: 24px 18px 20px;
          border-radius: 20px;
        }

        .brand-pill {
          font-size: 11px;
          margin-left: 58px; /* ëª¨ë°”ì¼ì—ì„œë„ ë’¤ë¡œê°€ê¸° ë²„íŠ¼ê³¼ ê²¹ì¹˜ì§€ ì•Šë„ë¡ */
        }

        .signup-link {
          font-size: 12px;
        }
      }

      /* í‘¸í„° ìŠ¤íƒ€ì¼ */
      .site-footer {
        background: rgba(255, 255, 255, 0.95);
        border-top: 1px solid rgba(0, 0, 0, 0.08);
        padding: 40px 20px;
        margin-top: auto;
        color: var(--text-secondary);
        width: 100%;
      }

      .footer-content {
        max-width: 1400px;
        margin: 0 auto;
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: center;
        gap: 24px;
        font-size: 14px;
        line-height: 1.8;
        align-items: center;
      }

      .footer-item {
        display: flex;
        flex-direction: row;
        align-items: center;
        gap: 12px;
      }

      .footer-label {
        font-weight: 700;
        color: var(--text-primary);
        font-size: 13px;
        margin-bottom: 4px;
      }

      .footer-value {
        color: var(--text-secondary);
        font-size: 13px;
      }

      .footer-value a {
        color: var(--accent-color);
        text-decoration: none;
        transition: opacity 0.2s ease;
      }

      .footer-value a:hover {
        opacity: 0.8;
        text-decoration: underline;
      }

      @media (max-width: 768px) {
        .site-footer {
          padding: 32px 16px;
        }

        .footer-content {
          gap: 16px;
          font-size: 12px;
          flex-direction: row;
          flex-wrap: wrap;
        }

        .footer-item {
          flex-direction: row;
          align-items: center;
          gap: 6px;
        }

        .footer-label {
          font-size: 12px;
        }

        .footer-value {
          font-size: 12px;
        }
      }
    </style>
    <!-- Meta Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '823098897158597');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=823098897158597&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
  </head>
  <body>
    <div class="login-shell">
      <div class="login-container">
        <button class="back-btn" onclick="location.href='index.html'">â†</button>

        <div class="brand-pill">SAJANGPICK MEMBERSHIP</div>
        <div class="logo">ì‚¬ì¥í”½</div>
        <div class="subtitle">ì‚¬ì¥ë‹˜ì„ ìœ„í•œ AI ìš´ì˜ ë¹„ì„œ í—ˆë¸Œ</div>

        <div class="brand-hero" aria-hidden="true">
          <div class="brand-icon">SP</div>
          <div>
            <p class="brand-hero__title">ì‚¬ì¥ë‹˜ ë§ì¶¤í˜• ì›ìŠ¤í†± ê²½í—˜</p>
            <p class="brand-hero__desc">
              ë¸”ë¡œê·¸ Â· ì‡¼ì¸  Â· ì •ì±…ì§€ì›ê¸ˆ Â· ë¦¬ë·° ê´€ë¦¬ê¹Œì§€ ë¸Œëœë“œ í†¤ ê·¸ëŒ€ë¡œ ì œê³µí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <ul class="brand-benefits">
          <li>
            <span>âš¡</span>
            <div>
              <p class="benefit-title">3ë¶„ ì™„ì„± ì›Œí¬í”Œë¡œìš°</p>
              <p class="benefit-desc">
                AIê°€ ì‚¬ì¥í”½ í†¤ìœ¼ë¡œ ê¸€Â·ì´ë¯¸ì§€ë¥¼ ìë™ êµ¬ì„±í•´ ì‹œê°„ì„ ì•„ë‚ë‹ˆë‹¤.
              </p>
            </div>
          </li>
          <li>
            <span>ğŸ“Š</span>
            <div>
              <p class="benefit-title">ì‹¤ì‹œê°„ ë°ì´í„° ì¸ì‚¬ì´íŠ¸</p>
              <p class="benefit-desc">
                ë„¤ì´ë²„ í‚¤ì›Œë“œ, ë‰´ìŠ¤, ì •ì±…ì§€ì›ê¸ˆ ì •ë³´ë¥¼ í•œ ë²ˆì— í™•ì¸í•©ë‹ˆë‹¤.
              </p>
            </div>
          </li>
          <li>
            <span>ğŸ”</span>
            <div>
              <p class="benefit-title">ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸</p>
              <p class="benefit-desc">
                ë³„ë„ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì•ˆì „í•˜ê²Œ ì ‘ì†í•˜ê³  ì–¸ì œë“  ë¡œê·¸ì•„ì›ƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
            </div>
          </li>
        </ul>

        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>

        <div class="social-login">
          <button type="button" class="kakao-btn" id="kakaoLoginAuto" onclick="handleKakaoLoginClick('auto', event)">
            <div class="kakao-btn-content">
              <span class="kakao-emoji">ğŸ’¬</span>
              <span>ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸</span>
            </div>
            <span class="kakao-btn-desc">ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€</span>
          </button>
          <button type="button" class="kakao-btn" id="kakaoLoginManual" style="background: linear-gradient(135deg, #fee500 0%, #fde768 80%, #fee500 100%); opacity: 0.95;" onclick="handleKakaoLoginClick('manual', event)">
            <div class="kakao-btn-content">
              <span class="kakao-emoji">ğŸ”</span>
              <span>ì¹´ì¹´ì˜¤ ìˆ˜ë™ ë¡œê·¸ì¸</span>
            </div>
            <span class="kakao-btn-desc">ë§¤ë²ˆ ë¡œê·¸ì¸ í•„ìš”</span>
          </button>
        </div>

        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>ë¡œê·¸ì¸ ì¤‘...</p>
        </div>

        <div class="signup-link">
          ì•„ì§ ê³„ì •ì´ ì—†ë‹¤ë©´
          <a href="join.html" id="signupLink">ì‚¬ì¥í”½ íšŒì›ê°€ì…</a>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js" integrity="sha384-GFr3yTh5lJznCbZfpTtXnwboFsxqtTQoeTZCRHhE0579KrRmlCzen5AA8ohaB5ug" crossorigin="anonymous"></script>
    <script>
      // âš ï¸ ì¤‘ìš”: Live Server ëŒ€ì‹  Express ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”!
      // Express ì„œë²„ ì‹¤í–‰ ë°©ë²•:
      // 1. í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
      // 2. 'node server.js' ì‹¤í–‰
      // 3. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3003/login.html ì ‘ì†
      //
      // Live Serverë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ê³  .env íŒŒì¼ì˜ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”:
      // window.SUPABASE_URL = 'https://your-project.supabase.co';
      // window.SUPABASE_ANON_KEY = 'your-anon-key';
    </script>
    <script src="/assets/auth-state.js?v=202410" defer></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      let redirectTarget = params.get("redirect");
      
      // redirect íŒŒë¼ë¯¸í„°ë¥¼ sessionStorageì— ì €ì¥ (OAuth ì½œë°± í›„ì—ë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´)
      if (redirectTarget) {
        sessionStorage.setItem('loginRedirect', redirectTarget);
      } else {
        // sessionStorageì—ì„œ redirect ê°€ì ¸ì˜¤ê¸° (OAuth ì½œë°± í›„)
        redirectTarget = sessionStorage.getItem('loginRedirect');
      }

      function resolveRedirectTarget() {
        // sessionStorageì—ì„œ redirect ë‹¤ì‹œ í™•ì¸ (OAuth ì½œë°± í›„ì—ë„ ìœ ì§€ë˜ë„ë¡)
        let target = redirectTarget || sessionStorage.getItem('loginRedirect');
        
        console.log("[ë¡œê·¸ì¸] resolveRedirectTarget í˜¸ì¶œ");
        console.log("[ë¡œê·¸ì¸] redirectTarget ë³€ìˆ˜:", redirectTarget);
        console.log("[ë¡œê·¸ì¸] sessionStorage loginRedirect:", sessionStorage.getItem('loginRedirect'));
        console.log("[ë¡œê·¸ì¸] ìµœì¢… target:", target);
        
        if (!target) {
          console.log("[ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„° ì—†ìŒ, index.htmlë¡œ ì´ë™");
          return "index.html";
        }
        
        // URL ë””ì½”ë”© (encodeURIComponentë¡œ ì¸ì½”ë”©ëœ ê²½ìš°)
        let decodedTarget = decodeURIComponent(target);
        console.log("[ë¡œê·¸ì¸] ë””ì½”ë”©ëœ redirect ëŒ€ìƒ:", decodedTarget);
        
        // URL ì •ê·œí™” (ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜)
        let normalizedPath = decodedTarget.trim();
        
        // ìƒëŒ€ ê²½ë¡œì¸ ê²½ìš° ì ˆëŒ€ ê²½ë¡œë¡œ ë³€í™˜
        if (!normalizedPath.startsWith("/") && !normalizedPath.startsWith("http")) {
          normalizedPath = "/" + normalizedPath;
        }
        
        // ê´€ë¦¬ì í˜ì´ì§€ ê°ì§€ (ëŒ€ì†Œë¬¸ì êµ¬ë¶„ ì—†ì´)
        const lowerPath = normalizedPath.toLowerCase();
        const isAdminPage = 
          lowerPath.includes("/admin/") || 
          lowerPath.startsWith("admin/") ||
          lowerPath.includes("admin/pages/");
        
        if (isAdminPage) {
          // ê´€ë¦¬ì í˜ì´ì§€ ê²½ë¡œ ì •ê·œí™”
          let adminPath = normalizedPath;
          
          // admin/ë¡œ ì‹œì‘í•˜ëŠ” ê²½ìš° /admin/ë¡œ ë³€ê²½
          if (adminPath.startsWith("admin/") || adminPath.startsWith("/admin/")) {
            if (!adminPath.startsWith("/")) {
              adminPath = "/" + adminPath;
            }
          }
          
          // /adminìœ¼ë¡œë§Œ ëë‚˜ëŠ” ê²½ìš° ëŒ€ì‹œë³´ë“œë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
          if (adminPath === "/admin" || adminPath === "/admin/") {
            adminPath = "/admin/pages/dashboard.html";
          }
          
          // /admin/ ë’¤ì— pagesê°€ ì—†ëŠ” ê²½ìš°
          if (adminPath.startsWith("/admin/") && !adminPath.includes("/pages/")) {
            if (adminPath === "/admin/") {
              adminPath = "/admin/pages/dashboard.html";
            } else {
              // /admin/xxx í˜•íƒœë©´ /admin/pages/xxxë¡œ ë³€ê²½
              const restPath = adminPath.substring(7); // "/admin/" ì œê±°
              adminPath = "/admin/pages/" + restPath;
            }
          }
          
          // ì ˆëŒ€ ê²½ë¡œ ë³´ì¥
          if (!adminPath.startsWith("/")) {
            adminPath = "/" + adminPath;
          }
          
          // .html í™•ì¥ìê°€ ì—†ìœ¼ë©´ ì¶”ê°€ (pages ê²½ë¡œì¸ ê²½ìš°)
          if (adminPath.startsWith("/admin/pages/") && !adminPath.endsWith(".html") && !adminPath.includes("?")) {
            adminPath = adminPath + ".html";
          }
          
          console.log("[ë¡œê·¸ì¸] âœ… ê´€ë¦¬ì í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸:", adminPath);
          sessionStorage.removeItem('loginRedirect'); // ì‚¬ìš© í›„ ì œê±°
          return adminPath;
        }
        
        // login.html ìì²´ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•˜ë ¤ëŠ” ê²½ìš° ë°©ì§€
        if (normalizedPath === "/login.html" || normalizedPath === "login.html" || normalizedPath.endsWith("/login.html")) {
          console.log("[ë¡œê·¸ì¸] login.html ìì²´, index.htmlë¡œ ì´ë™");
          sessionStorage.removeItem('loginRedirect');
          return "index.html";
        }
        
        // ì ˆëŒ€ ê²½ë¡œê°€ ì•„ë‹Œ ê²½ìš° index.htmlë¡œ ì´ë™
        if (!normalizedPath.startsWith("/") && !normalizedPath.startsWith("http")) {
          console.log("[ë¡œê·¸ì¸] ì˜ëª»ëœ ê²½ë¡œ, index.htmlë¡œ ì´ë™");
          sessionStorage.removeItem('loginRedirect');
          return "index.html";
        }
        
        console.log("[ë¡œê·¸ì¸] ì¼ë°˜ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸:", normalizedPath);
        sessionStorage.removeItem('loginRedirect'); // ì‚¬ìš© í›„ ì œê±°
        return normalizedPath;
      }

      // ì´ë¯¸ ë¡œê·¸ì¸ëœ ê²½ìš° ì§€ì •ëœ í˜ì´ì§€ë¡œ ì´ë™ (Supabase ì„¸ì…˜ ê¸°ë°˜)
      (async function checkAlreadyLoggedIn() {
        // Supabase ì´ˆê¸°í™” ëŒ€ê¸°
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        
        try {
          // ìˆ˜ë™ ë¡œê·¸ì¸ íƒ€ì…ì¸ ê²½ìš° sessionStorage í™•ì¸
          const loginType = localStorage.getItem("loginType");
          if (loginType === "manual") {
            const sessionData = sessionStorage.getItem("userData");
            if (!sessionData) {
              // sessionStorageì— ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìë™ ë¡œê·¸ì•„ì›ƒ (ë¸Œë¼ìš°ì € ì¬ì‹œì‘ ë˜ëŠ” íƒ­ ë‹«ìŒ)
              console.log("[ë¡œê·¸ì¸] ìˆ˜ë™ ë¡œê·¸ì¸ ì„¸ì…˜ ë§Œë£Œ - ìë™ ë¡œê·¸ì•„ì›ƒ");
              await window.authState.supabase.auth.signOut();
              localStorage.removeItem("loginType");
              return; // ë¡œê·¸ì¸ í˜ì´ì§€ì— ë¨¸ë¬´ë¦„
            }
          }
          
          const { data: { session } } = await window.authState.supabase.auth.getSession();
          if (session) {
            window.location.replace(resolveRedirectTarget());
          }
        } catch (error) {
          console.error("ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:", error);
        }
      })();

      // Supabase ê°ì²´ ì°¸ì¡° (ì„œë²„ì—ì„œ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¨ auth-state.jsì—ì„œ ì´ˆê¸°í™”)
      let supabase = null;
      (async function initSupabase() {
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        supabase = window.authState.supabase;
      })();

      function setLoggedInFromSession(session) {
        if (!session) return;
        
        // ë¡œê·¸ì¸ íƒ€ì… í™•ì¸ (ê°„í¸ ë¡œê·¸ì¸ ë˜ëŠ” ìˆ˜ë™ ë¡œê·¸ì¸)
        const loginType = sessionStorage.getItem('kakaoLoginType') || 'auto';
        const useSessionStorage = loginType === 'manual';
        const storage = useSessionStorage ? sessionStorage : localStorage;
        
        const user = session.user || {};
        const userData = {
          id: user.id || "",
          email: user.email || "",
          displayName: user.user_metadata?.full_name || user.user_metadata?.name || "",
          photoURL: user.user_metadata?.avatar_url || "",
          provider: (user.app_metadata?.provider || "kakao"),
          loginTime: new Date().toISOString(),
          loginType: loginType, // ë¡œê·¸ì¸ íƒ€ì… ì €ì¥
        };
        
        // ë¡œê·¸ì¸ íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥¸ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©
        storage.setItem("userData", JSON.stringify(userData));
        storage.setItem("isLoggedIn", "true");
        
        // ë¡œê·¸ì¸ íƒ€ì… í”Œë˜ê·¸ë¥¼ localStorageì—ë„ ì €ì¥ (auth-state.jsì—ì„œ í™•ì¸í•˜ê¸° ìœ„í•´)
        if (useSessionStorage) {
          localStorage.setItem("loginType", "manual");
          // ìˆ˜ë™ ë¡œê·¸ì¸ì¸ ê²½ìš° localStorageì˜ ê¸°ì¡´ ì„¸ì…˜ ì •ë³´ ì‚­ì œ
          localStorage.removeItem("userData");
          localStorage.removeItem("isLoggedIn");
        } else {
          localStorage.setItem("loginType", "auto");
          // ê°„í¸ ë¡œê·¸ì¸ì¸ ê²½ìš° sessionStorageì˜ ê¸°ì¡´ ì„¸ì…˜ ì •ë³´ ì‚­ì œ
          sessionStorage.removeItem("userData");
          sessionStorage.removeItem("isLoggedIn");
        }
        
        // ë¡œê·¸ì¸ íƒ€ì… í”Œë˜ê·¸ ì œê±° (ë‹¤ìŒ ë¡œê·¸ì¸ì„ ìœ„í•´)
        sessionStorage.removeItem('kakaoLoginType');
        
        console.log(`[ë¡œê·¸ì¸] ${loginType === 'auto' ? 'ê°„í¸ ë¡œê·¸ì¸' : 'ìˆ˜ë™ ë¡œê·¸ì¸'} - ${useSessionStorage ? 'sessionStorage' : 'localStorage'}ì— ì €ì¥ë¨`);
      }

      function redirectAfterLogin() {
        const targetUrl = resolveRedirectTarget();
        console.log("[ë¡œê·¸ì¸] redirectAfterLogin - ìµœì¢… ë¦¬ë‹¤ì´ë ‰íŠ¸ URL:", targetUrl);
        
        // ê´€ë¦¬ì í˜ì´ì§€ì¸ ê²½ìš° ëª…í™•í•˜ê²Œ ë¡œê·¸ ì¶œë ¥
        if (targetUrl.includes("/admin/")) {
          console.log("[ë¡œê·¸ì¸] âœ… ê´€ë¦¬ì í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸í•©ë‹ˆë‹¤:", targetUrl);
        }
        
        window.location.replace(targetUrl);
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ Supabase ì„¸ì…˜ í™•ì¸ ë° ìƒíƒœ ë³€í™” ê°ì§€
      (async () => {
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        
        const supabaseClient = window.authState.supabase;
        
        try {
          // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì½œë°±ì¸ ê²½ìš° ë¡œë”© í‘œì‹œ
          const hashParams = new URLSearchParams(window.location.hash.slice(1));
          if (hashParams.has('access_token')) {
            showLoading();
          }
          
          const { data: { session } } = await supabaseClient.auth.getSession();
          if (session) {
            console.log("[ë¡œê·¸ì¸] ì„¸ì…˜ ë°œê²¬ - ë¡œê·¸ì¸ ì²˜ë¦¬ ì‹œì‘");
            // OAuth ì½œë°±ì¸ ê²½ìš°ì—ë§Œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë°©ì§€)
            const hashParams = new URLSearchParams(window.location.hash.slice(1));
            const isOAuthCallback = hashParams.has('access_token') || hashParams.has('code');
            
            if (isOAuthCallback) {
              console.log("[ë¡œê·¸ì¸] OAuth ì½œë°± ê°ì§€ - ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰");
              setLoggedInFromSession(session);
              // ì•½ê°„ì˜ ì§€ì—° í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì„¸ì…˜ ì €ì¥ ì™„ë£Œ ëŒ€ê¸°)
              setTimeout(() => {
                redirectAfterLogin();
              }, 200);
            } else {
              // ì´ë¯¸ ë¡œê·¸ì¸ëœ ìƒíƒœë¡œ í˜ì´ì§€ ì ‘ê·¼í•œ ê²½ìš°
              console.log("[ë¡œê·¸ì¸] ì´ë¯¸ ë¡œê·¸ì¸ëœ ìƒíƒœ - ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹¤í–‰");
              redirectAfterLogin();
            }
          } else {
            hideLoading();
          }
        } catch (error) {
          console.error('ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', error);
          hideLoading();
        }
        
        // ë¡œê·¸ì¸ ìƒíƒœ ë³€í™” ê°ì§€ (login.html í˜ì´ì§€ì—ì„œë§Œ ì‹¤í–‰)
        let redirectHandled = false; // ì¤‘ë³µ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë°©ì§€
        supabaseClient.auth.onAuthStateChange((event, session) => {
          console.log('Auth state changed:', event, session ? 'ì„¸ì…˜ ìˆìŒ' : 'ì„¸ì…˜ ì—†ìŒ');
          
          if (event === "SIGNED_IN" && session && !redirectHandled) {
            console.log("[ë¡œê·¸ì¸] SIGNED_IN ì´ë²¤íŠ¸ ê°ì§€ - ë¡œê·¸ì¸ ì²˜ë¦¬ ì‹œì‘");
            redirectHandled = true; // ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬ ì¤‘ í”Œë˜ê·¸ ì„¤ì •
            showLoading();
            setLoggedInFromSession(session);
            // ì•½ê°„ì˜ ì§€ì—° í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì„¸ì…˜ ì €ì¥ ì™„ë£Œ ëŒ€ê¸°)
            setTimeout(() => {
              redirectAfterLogin();
            }, 200);
          } else if (event === "SIGNED_OUT") {
            hideLoading();
            redirectHandled = false; // ë¡œê·¸ì•„ì›ƒ ì‹œ í”Œë˜ê·¸ ë¦¬ì…‹
          }
        });
      })();

      // DOM elements
      const errorMessage = document.getElementById("errorMessage");
      const successMessage = document.getElementById("successMessage");
      const loading = document.getElementById("loading");

      // Show error message
      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.style.display = "block";
        successMessage.style.display = "none";
      }

      // Show success message
      function showSuccess(message) {
        successMessage.textContent = message;
        successMessage.style.display = "block";
        errorMessage.style.display = "none";
      }

      // Hide messages
      function hideMessages() {
        errorMessage.style.display = "none";
        successMessage.style.display = "none";
      }

      // Show loading
      function showLoading() {
        loading.style.display = "block";
      }

      // Hide loading
      function hideLoading() {
        loading.style.display = "none";
      }

      // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ê³µí†µ í•¨ìˆ˜
      async function handleKakaoLogin(loginType) {
        try {
          console.log(`[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œì‘] íƒ€ì…: ${loginType}`);
          showLoading();
          hideMessages();
          
          // ë¡œê·¸ì¸ íƒ€ì… ì €ì¥ (sessionStorageì— ì„ì‹œ ì €ì¥ - ë¡œê·¸ì¸ í›„ ì‚¬ìš©)
          sessionStorage.setItem('kakaoLoginType', loginType);
          
          // Supabase ê°ì²´ ëŒ€ê¸° (window.authState.supabase ì§ì ‘ ì‚¬ìš©)
          let supabaseClient = null;
          let retryCount = 0;
          const maxRetries = 50; // ìµœëŒ€ 5ì´ˆ ëŒ€ê¸°
          
          while (!supabaseClient && retryCount < maxRetries) {
            if (window.authState?.supabase) {
              supabaseClient = window.authState.supabase;
              break;
            }
            await new Promise(resolve => setTimeout(resolve, 100));
            retryCount++;
          }
          
          if (!supabaseClient) {
            // fallback: supabase ë³€ìˆ˜ í™•ì¸
            if (supabase) {
              supabaseClient = supabase;
            } else {
              throw new Error('Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
            }
          }
          
          console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] Supabase í´ë¼ì´ì–¸íŠ¸ ì¤€ë¹„ ì™„ë£Œ');
          
          // redirect íŒŒë¼ë¯¸í„°ë¥¼ ë¨¼ì € sessionStorageì— ì €ì¥ (ê°„í¸ ë¡œê·¸ì¸ì—ì„œë„ ì‚¬ìš©í•˜ê¸° ìœ„í•´)
          const currentRedirect = redirectTarget || sessionStorage.getItem('loginRedirect');
          if (currentRedirect) {
            sessionStorage.setItem('loginRedirect', currentRedirect);
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„° ì €ì¥:', currentRedirect);
          }
          
          // ê°„í¸ ë¡œê·¸ì¸ì¸ ê²½ìš° ê¸°ì¡´ ì„¸ì…˜ í™•ì¸
          if (loginType === 'auto') {
            console.log('[ê°„í¸ ë¡œê·¸ì¸] ê¸°ì¡´ ì„¸ì…˜ í™•ì¸ ì¤‘...');
            try {
              const { data: { session }, error: sessionError } = await supabaseClient.auth.getSession();
              if (sessionError) {
                console.log('[ê°„í¸ ë¡œê·¸ì¸] ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', sessionError);
              } else if (session && session.user) {
                console.log('[ê°„í¸ ë¡œê·¸ì¸] âœ… ê¸°ì¡´ ì„¸ì…˜ ë°œê²¬ - ìë™ ë¡œê·¸ì¸');
                console.log('[ê°„í¸ ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„°:', sessionStorage.getItem('loginRedirect'));
                setLoggedInFromSession(session);
                setTimeout(() => {
                  redirectAfterLogin();
                }, 200);
                hideLoading();
                return; // ê¸°ì¡´ ì„¸ì…˜ì´ ìˆìœ¼ë©´ OAuth ì´ë™í•˜ì§€ ì•Šê³  ë°”ë¡œ ë¡œê·¸ì¸
              }
            } catch (error) {
              console.log('[ê°„í¸ ë¡œê·¸ì¸] ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', error);
              // ì„¸ì…˜ í™•ì¸ ì‹¤íŒ¨ ì‹œ OAuth ì§„í–‰
            }
            console.log('[ê°„í¸ ë¡œê·¸ì¸] ê¸°ì¡´ ì„¸ì…˜ ì—†ìŒ - ì¹´ì¹´ì˜¤ OAuthë¡œ ì´ë™');
          }
          
          // redirect íŒŒë¼ë¯¸í„° í™•ì¸ (ìœ„ì—ì„œ ì´ë¯¸ ì €ì¥í–ˆìœ¼ë¯€ë¡œ sessionStorageì—ì„œ ê°€ì ¸ì˜¤ê¸°)
          const savedRedirect = redirectTarget || sessionStorage.getItem('loginRedirect');
          
          // redirect íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ URL ìƒì„±
          let redirectUrl = window.location.origin + window.location.pathname;
          if (savedRedirect) {
            redirectUrl += '?redirect=' + encodeURIComponent(savedRedirect);
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„° í¬í•¨:', savedRedirect);
          } else {
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„° ì—†ìŒ');
          }
          
          console.log(`[ì¹´ì¹´ì˜¤ ${loginType === 'auto' ? 'ê°„í¸' : 'ìˆ˜ë™'} ë¡œê·¸ì¸] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...`);
          console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] ë¦¬ë‹¤ì´ë ‰íŠ¸ URL:', redirectUrl);
          
          // Supabase OAuthë¥¼ ì‚¬ìš©í•œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
          const oauthOptions = {
            redirectTo: redirectUrl
          };
          
          // ìˆ˜ë™ ë¡œê·¸ì¸ì¸ ê²½ìš°ì—ë§Œ prompt: 'login' ì„¤ì • (ë§¤ë²ˆ ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ)
          // ê°„í¸ ë¡œê·¸ì¸ì€ prompt ì„¤ì • ì•ˆ í•¨ (ìë™ ë¡œê·¸ì¸ ì‹œë„)
          if (loginType === 'manual') {
            oauthOptions.queryParams = {
              prompt: 'login' // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ê°•ì œë¡œ í‘œì‹œ
            };
            console.log('[ìˆ˜ë™ ë¡œê·¸ì¸] prompt: login ì„¤ì • - ë¡œê·¸ì¸ í˜ì´ì§€ í‘œì‹œ');
          } else {
            console.log('[ê°„í¸ ë¡œê·¸ì¸] prompt ì„¤ì • ì•ˆ í•¨ - ìë™ ë¡œê·¸ì¸ ì‹œë„');
          }
          
          console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] OAuth ìš”ì²­ ì‹œì‘...');
          const { data, error } = await supabaseClient.auth.signInWithOAuth({
            provider: 'kakao',
            options: oauthOptions
          });

          console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] OAuth ì‘ë‹µ:', { data, error });

          if (error) {
            hideLoading();
            showError('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message);
            console.error('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
            return;
          }
          
          // ì„±ê³µ ì‹œ data.urlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€)
          if (data?.url) {
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™:', data.url);
            // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
            window.location.href = data.url;
          } else {
            hideLoading();
            showError('ë¡œê·¸ì¸ URLì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
            console.error('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] data.urlì´ ì—†ìŠµë‹ˆë‹¤. data:', data);
          }
        } catch (err) {
          hideLoading();
          showError('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + (err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
          console.error('ë¡œê·¸ì¸ ì˜¤ë¥˜:', err);
        }
      }

      // ì „ì—­ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ì„œ inline onclickì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ (ì¦‰ì‹œ ì •ì˜)
      window.handleKakaoLoginClick = function(loginType, event) {
        console.log('[ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­] ì‹œì‘ - íƒ€ì…:', loginType);
        if (event) {
          event.preventDefault();
          event.stopPropagation();
        }
        
        // handleKakaoLogin í•¨ìˆ˜ê°€ ì •ì˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
        if (typeof handleKakaoLogin !== 'function') {
          console.error('[ë¡œê·¸ì¸ ë²„íŠ¼] handleKakaoLogin í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
          alert('ë¡œê·¸ì¸ í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
          return;
        }
        
        console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] handleKakaoLogin í•¨ìˆ˜ í˜¸ì¶œ');
        handleKakaoLogin(loginType).catch(err => {
          console.error('[ë¡œê·¸ì¸ ë²„íŠ¼] ì˜ˆì™¸ ë°œìƒ:', err);
          alert('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + (err.message || 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜'));
        });
      };

      // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì • (DOMContentLoadedë¡œ ì•ˆì „í•˜ê²Œ ì‹¤í–‰)
      function setupLoginButtons() {
        // ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸ (ì„¸ì…˜ ìœ ì§€)
        const kakaoLoginAutoBtn = document.getElementById("kakaoLoginAuto");
        if (kakaoLoginAutoBtn) {
          console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ê°„í¸ ë¡œê·¸ì¸ ë²„íŠ¼ ì°¾ìŒ');
          
          // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì´ë²¤íŠ¸ ë°”ì¸ë”© (ìº¡ì²˜ ë‹¨ê³„ í¬í•¨)
          kakaoLoginAutoBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ê°„í¸ ë¡œê·¸ì¸ í´ë¦­ë¨ (addEventListener)');
            handleKakaoLogin('auto');
          }, true); // ìº¡ì²˜ ë‹¨ê³„ì—ì„œë„ ì²˜ë¦¬
          
          kakaoLoginAutoBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ê°„í¸ ë¡œê·¸ì¸ í´ë¦­ë¨ (addEventListener bubble)');
            handleKakaoLogin('auto');
          }, false); // ë²„ë¸”ë§ ë‹¨ê³„ì—ì„œë„ ì²˜ë¦¬
          
          // ë²„íŠ¼ì´ í´ë¦­ ê°€ëŠ¥í•œì§€ í™•ì¸
          kakaoLoginAutoBtn.style.pointerEvents = 'auto';
          kakaoLoginAutoBtn.style.cursor = 'pointer';
          kakaoLoginAutoBtn.disabled = false;
          kakaoLoginAutoBtn.setAttribute('tabindex', '0');
        } else {
          console.error('[ë¡œê·¸ì¸ ë²„íŠ¼] ê°„í¸ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        }

        // ì¹´ì¹´ì˜¤ ìˆ˜ë™ ë¡œê·¸ì¸ (ì„¸ì…˜ ë¯¸ìœ ì§€)
        const kakaoLoginManualBtn = document.getElementById("kakaoLoginManual");
        if (kakaoLoginManualBtn) {
          console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ìˆ˜ë™ ë¡œê·¸ì¸ ë²„íŠ¼ ì°¾ìŒ');
          
          // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ ì´ë²¤íŠ¸ ë°”ì¸ë”© (ìº¡ì²˜ ë‹¨ê³„ í¬í•¨)
          kakaoLoginManualBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ìˆ˜ë™ ë¡œê·¸ì¸ í´ë¦­ë¨ (addEventListener)');
            handleKakaoLogin('manual');
          }, true); // ìº¡ì²˜ ë‹¨ê³„ì—ì„œë„ ì²˜ë¦¬
          
          kakaoLoginManualBtn.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            console.log('[ë¡œê·¸ì¸ ë²„íŠ¼] ìˆ˜ë™ ë¡œê·¸ì¸ í´ë¦­ë¨ (addEventListener bubble)');
            handleKakaoLogin('manual');
          }, false); // ë²„ë¸”ë§ ë‹¨ê³„ì—ì„œë„ ì²˜ë¦¬
          
          // ë²„íŠ¼ì´ í´ë¦­ ê°€ëŠ¥í•œì§€ í™•ì¸
          kakaoLoginManualBtn.style.pointerEvents = 'auto';
          kakaoLoginManualBtn.style.cursor = 'pointer';
          kakaoLoginManualBtn.disabled = false;
          kakaoLoginManualBtn.setAttribute('tabindex', '0');
        } else {
          console.error('[ë¡œê·¸ì¸ ë²„íŠ¼] ìˆ˜ë™ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        }
      }

      // DOMì´ ë¡œë“œëœ í›„ ë²„íŠ¼ ì„¤ì • (ì—¬ëŸ¬ ì‹œì ì—ì„œ ì‹œë„)
      function initLoginButtons() {
        setupLoginButtons();
      }
      
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initLoginButtons);
      } else {
        // DOMì´ ì´ë¯¸ ë¡œë“œëœ ê²½ìš° ì¦‰ì‹œ ì‹¤í–‰
        setTimeout(initLoginButtons, 0);
      }
      
      // window.onloadì—ì„œë„ í•œ ë²ˆ ë” ì‹œë„
      window.addEventListener('load', function() {
        setTimeout(setupLoginButtons, 100);
      });

      // íšŒì›ê°€ì… ë§í¬ì— redirect íŒŒë¼ë¯¸í„° ì¶”ê°€
      const signupLink = document.getElementById("signupLink");
      if (signupLink && redirectTarget) {
        signupLink.href = `join.html?redirect=${encodeURIComponent(redirectTarget)}`;
      }
    </script>

    <!-- ì¶”ì  ë° ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/assets/analytics.js"></script>
    <script src="/assets/error-logger.js"></script>
    <script src="/assets/performance-tracker.js"></script>

    <!-- í‘¸í„° -->
    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-item">
          <div class="footer-label">ëŒ€í‘œìëª…</div>
          <div class="footer-value">ì˜¤ëŒ€ì¤€</div>
        </div>
        <div class="footer-item">
          <div class="footer-label">ì‚¬ì—…ì¥ ì£¼ì†Œì§€</div>
          <div class="footer-value">ë¶€ì‚°ê´‘ì—­ì‹œ ë¶êµ¬ ë°±ì–‘ëŒ€ë¡œ 1003 5ë™307í˜¸</div>
        </div>
        <div class="footer-item">
          <div class="footer-label">ì‚¬ì—…ì ë²ˆí˜¸</div>
          <div class="footer-value">441-31-01878</div>
        </div>
        <div class="footer-item">
          <div class="footer-label">ì´ë©”ì¼ ì£¼ì†Œ</div>
          <div class="footer-value">
            <a href="mailto:ohdaejun@naver.com">ohdaejun@naver.com</a>
          </div>
        </div>
        <div class="footer-item">
          <div class="footer-label">ì „í™”ë²ˆí˜¸</div>
          <div class="footer-value">
            <a href="tel:010-6664-3744">010-6664-3744</a>
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>
