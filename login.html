<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://*.supabase.co https://naver-keyword-tool.onrender.com http://127.0.0.1:* http://localhost:*; img-src 'self' data: https:; script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline'; font-src 'self' data:; frame-ancestors 'self'; base-uri 'self'; form-action 'self'" />
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <title>ë¡œê·¸ì¸ - ì‚¬ì¥í”½</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%23ff7b54'/%3E%3Ctext x='32' y='40' text-anchor='middle' font-size='28' font-family='Arial' fill='white'%3ESP%3C/text%3E%3C/svg%3E" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />
    <style>
      :root {
        --brand-primary: #ff7b54;
        --brand-primary-dark: #ff5c2e;
        --brand-ink: #201a17;
        --brand-muted: #7a6a60;
        --brand-cream: #fff7f0;
        --brand-line: rgba(255, 123, 84, 0.25);
        --brand-soft: #ffe3d5;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Pretendard Variable", Pretendard, "Noto Sans KR", Arial,
          sans-serif;
        background: radial-gradient(
              circle at 15% 15%,
              rgba(255, 123, 84, 0.13),
              transparent 45%
            ),
          radial-gradient(
              circle at 85% 0%,
              rgba(255, 208, 188, 0.4),
              transparent 40%
            )
            var(--brand-cream);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 32px 16px;
        color: var(--brand-ink);
      }

      .login-shell {
        width: 100%;
        max-width: 520px;
      }

      .login-container {
        background: #fff;
        border-radius: 32px;
        border: 1px solid var(--brand-line);
        box-shadow: 0 40px 80px rgba(32, 26, 23, 0.08);
        padding: 48px 40px 36px;
        width: 100%;
        position: relative;
        overflow: hidden;
      }

      .login-container::after {
        content: "";
        position: absolute;
        inset: 18px -130px auto auto;
        width: 240px;
        height: 240px;
        background: radial-gradient(
          circle at 30% 30%,
          rgba(255, 123, 84, 0.25),
          transparent 60%
        );
        transform: rotate(25deg);
        pointer-events: none;
      }

      .login-container > * {
        position: relative;
        z-index: 1;
      }

      .back-btn {
        position: absolute;
        top: 22px;
        left: 22px;
        border: none;
        background: rgba(255, 123, 84, 0.08);
        color: var(--brand-primary);
        width: 42px;
        height: 42px;
        border-radius: 14px;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s ease, background 0.2s ease;
      }

      .back-btn:hover {
        transform: translateX(-3px);
        background: rgba(255, 123, 84, 0.15);
      }

      .brand-pill {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 14px;
        border-radius: 999px;
        background: rgba(255, 123, 84, 0.1);
        color: var(--brand-primary);
        font-size: 12px;
        font-weight: 700;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        margin-bottom: 16px;
      }

      .logo {
        text-align: left;
        font-size: 36px;
        font-weight: 900;
        color: var(--brand-ink);
        margin-bottom: 8px;
        letter-spacing: -0.02em;
      }

      .subtitle {
        color: var(--brand-muted);
        margin-bottom: 28px;
        font-size: 16px;
        line-height: 1.5;
      }

      .brand-hero {
        display: flex;
        gap: 16px;
        padding: 18px;
        border-radius: 24px;
        background: var(--brand-cream);
        border: 1px solid var(--brand-line);
        margin-bottom: 20px;
      }

      .brand-icon {
        width: 56px;
        height: 56px;
        border-radius: 18px;
        background: var(--brand-primary);
        color: #fff;
        font-weight: 800;
        font-size: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 12px 20px rgba(255, 123, 84, 0.35);
      }

      .brand-hero__title {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 4px;
      }

      .brand-hero__desc {
        font-size: 14px;
        color: var(--brand-muted);
        line-height: 1.5;
      }

      .brand-benefits {
        list-style: none;
        margin-bottom: 28px;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      .brand-benefits li {
        display: flex;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 18px;
        border: 1px solid rgba(32, 26, 23, 0.06);
        background: #fff;
        box-shadow: inset 0 0 0 1px rgba(255, 123, 84, 0.06);
      }

      .brand-benefits span {
        width: 36px;
        height: 36px;
        border-radius: 12px;
        background: rgba(255, 123, 84, 0.12);
        color: var(--brand-primary);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }

      .benefit-title {
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 2px;
      }

      .benefit-desc {
        font-size: 13px;
        color: var(--brand-muted);
        line-height: 1.4;
      }

      .form-group {
        margin-bottom: 20px;
        position: relative;
      }

      .form-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 600;
        color: var(--brand-ink);
      }

      .form-input {
        width: 100%;
        padding: 15px;
        border: 2px solid rgba(32, 26, 23, 0.08);
        border-radius: 14px;
        font-size: 16px;
        transition: border-color 0.3s, box-shadow 0.3s;
        background: var(--brand-cream);
      }

      .form-input:focus {
        outline: none;
        border-color: var(--brand-primary);
        box-shadow: 0 0 0 4px rgba(255, 123, 84, 0.18);
      }

      .form-input.valid {
        border-color: #22c55e;
      }

      .form-input.invalid {
        border-color: #ff6b6b;
      }

      .validation-message {
        font-size: 12px;
        margin-top: 5px;
        min-height: 18px;
      }

      .validation-message.valid {
        color: #16a34a;
      }

      .validation-message.invalid {
        color: #dc2626;
      }

      .social-login {
        display: flex;
        flex-direction: column;
        gap: 14px;
      }

      .kakao-btn {
        width: 100%;
        padding: 16px;
        border-radius: 18px;
        border: 1px solid rgba(0, 0, 0, 0.08);
        background: linear-gradient(
          135deg,
          #fee500 0%,
          #fde768 55%,
          #fee500 100%
        );
        color: #3c1e1e;
        font-size: 16px;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .kakao-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 24px rgba(253, 231, 104, 0.45);
      }

      .kakao-emoji {
        font-size: 18px;
      }

      .signup-link {
        text-align: center;
        margin-top: 32px;
        padding-top: 22px;
        border-top: 1px dashed var(--brand-line);
        color: var(--brand-muted);
        font-size: 14px;
      }

      .signup-link a {
        color: var(--brand-primary);
        text-decoration: none;
        font-weight: 700;
        margin-left: 6px;
      }

      .signup-link a:hover {
        text-decoration: underline;
      }

      .error-message,
      .success-message {
        padding: 12px 14px;
        border-radius: 14px;
        margin-bottom: 16px;
        font-size: 14px;
        display: none;
      }

      .error-message {
        background: rgba(255, 107, 107, 0.12);
        border: 1px solid rgba(255, 107, 107, 0.4);
        color: #b42318;
      }

      .success-message {
        background: rgba(34, 197, 94, 0.12);
        border: 1px solid rgba(34, 197, 94, 0.4);
        color: #047857;
      }

      .loading {
        display: none;
        text-align: center;
        margin: 24px 0 10px;
        color: var(--brand-muted);
        font-size: 14px;
      }

      .spinner {
        border: 3px solid rgba(0, 0, 0, 0.06);
        border-top: 3px solid var(--brand-primary);
        border-radius: 50%;
        width: 32px;
        height: 32px;
        animation: spin 1s linear infinite;
        margin: 0 auto 12px;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @media (max-width: 768px) {
        body {
          padding: 24px 12px;
        }

        .login-container {
          padding: 36px 24px 28px;
          border-radius: 24px;
        }

        .brand-hero {
          flex-direction: column;
        }
      }

      @media (max-width: 480px) {
        .login-container {
          padding: 32px 20px 24px;
        }

        .logo {
          font-size: 30px;
        }

        .brand-icon {
          width: 48px;
          height: 48px;
        }

        .brand-benefits li {
          flex-direction: column;
        }
      }

      @media (max-width: 360px) {
        body {
          padding: 16px 10px;
        }

        .login-container {
          padding: 24px 18px 20px;
          border-radius: 20px;
        }

        .brand-pill {
          font-size: 11px;
        }

        .signup-link {
          font-size: 12px;
        }
      }
    </style>
    <!-- Meta Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '823098897158597');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=823098897158597&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
  </head>
  <body>
    <div class="login-shell">
      <div class="login-container">
        <button class="back-btn" onclick="location.href='index.html'">â†</button>

        <div class="brand-pill">SAJANGPICK MEMBERSHIP</div>
        <div class="logo">ì‚¬ì¥í”½</div>
        <div class="subtitle">ì‚¬ì¥ë‹˜ì„ ìœ„í•œ AI ìš´ì˜ ë¹„ì„œ í—ˆë¸Œ</div>

        <div class="brand-hero" aria-hidden="true">
          <div class="brand-icon">SP</div>
          <div>
            <p class="brand-hero__title">ì‚¬ì¥ë‹˜ ë§ì¶¤í˜• ì›ìŠ¤í†± ê²½í—˜</p>
            <p class="brand-hero__desc">
              ë¸”ë¡œê·¸ Â· ì‡¼ì¸  Â· ì •ì±…ì§€ì›ê¸ˆ Â· ë¦¬ë·° ê´€ë¦¬ê¹Œì§€ ë¸Œëœë“œ í†¤ ê·¸ëŒ€ë¡œ ì œê³µí•©ë‹ˆë‹¤.
            </p>
          </div>
        </div>

        <ul class="brand-benefits">
          <li>
            <span>âš¡</span>
            <div>
              <p class="benefit-title">3ë¶„ ì™„ì„± ì›Œí¬í”Œë¡œìš°</p>
              <p class="benefit-desc">
                AIê°€ ì‚¬ì¥í”½ í†¤ìœ¼ë¡œ ê¸€Â·ì´ë¯¸ì§€ë¥¼ ìë™ êµ¬ì„±í•´ ì‹œê°„ì„ ì•„ë‚ë‹ˆë‹¤.
              </p>
            </div>
          </li>
          <li>
            <span>ğŸ“Š</span>
            <div>
              <p class="benefit-title">ì‹¤ì‹œê°„ ë°ì´í„° ì¸ì‚¬ì´íŠ¸</p>
              <p class="benefit-desc">
                ë„¤ì´ë²„ í‚¤ì›Œë“œ, ë‰´ìŠ¤, ì •ì±…ì§€ì›ê¸ˆ ì •ë³´ë¥¼ í•œ ë²ˆì— í™•ì¸í•©ë‹ˆë‹¤.
              </p>
            </div>
          </li>
          <li>
            <span>ğŸ”</span>
            <div>
              <p class="benefit-title">ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸</p>
              <p class="benefit-desc">
                ë³„ë„ ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì•ˆì „í•˜ê²Œ ì ‘ì†í•˜ê³  ì–¸ì œë“  ë¡œê·¸ì•„ì›ƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
              </p>
            </div>
          </li>
        </ul>

        <div class="error-message" id="errorMessage"></div>
        <div class="success-message" id="successMessage"></div>

        <div class="social-login">
          <button class="kakao-btn" id="kakaoLogin">
            <span class="kakao-emoji">ğŸ’¬</span>
            ì¹´ì¹´ì˜¤í†¡ ì•„ì´ë””ë¡œ ë¡œê·¸ì¸
          </button>
        </div>

        <div class="loading" id="loading">
          <div class="spinner"></div>
          <p>ë¡œê·¸ì¸ ì¤‘...</p>
        </div>

        <div class="signup-link">
          ì•„ì§ ê³„ì •ì´ ì—†ë‹¤ë©´
          <a href="join.html">ì‚¬ì¥í”½ íšŒì›ê°€ì…</a>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.4/dist/umd/supabase.min.js" integrity="sha384-GFr3yTh5lJznCbZfpTtXnwboFsxqtTQoeTZCRHhE0579KrRmlCzen5AA8ohaB5ug" crossorigin="anonymous"></script>
    <script>
      // âš ï¸ ì¤‘ìš”: Live Server ëŒ€ì‹  Express ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”!
      // Express ì„œë²„ ì‹¤í–‰ ë°©ë²•:
      // 1. í„°ë¯¸ë„ì—ì„œ í”„ë¡œì íŠ¸ í´ë”ë¡œ ì´ë™
      // 2. 'node server.js' ì‹¤í–‰
      // 3. ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3003/login.html ì ‘ì†
      //
      // Live Serverë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì•„ë˜ ì£¼ì„ì„ í•´ì œí•˜ê³  .env íŒŒì¼ì˜ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”:
      // window.SUPABASE_URL = 'https://your-project.supabase.co';
      // window.SUPABASE_ANON_KEY = 'your-anon-key';
    </script>
    <script src="/assets/auth-state.js?v=202410" defer></script>
    <script>
      const params = new URLSearchParams(window.location.search);
      const redirectTarget = params.get("redirect");

      function resolveRedirectTarget() {
        if (!redirectTarget) {
          console.log("[ë¡œê·¸ì¸] redirect íŒŒë¼ë¯¸í„° ì—†ìŒ, index.htmlë¡œ ì´ë™");
          return "index.html";
        }
        
        // URL ë””ì½”ë”© (encodeURIComponentë¡œ ì¸ì½”ë”©ëœ ê²½ìš°)
        let decodedTarget = decodeURIComponent(redirectTarget);
        console.log("[ë¡œê·¸ì¸] redirect ëŒ€ìƒ:", decodedTarget);
        
        // ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ ë¡œê·¸ì¸í•œ ê²½ìš° ê´€ë¦¬ì í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
        if (decodedTarget.startsWith("/admin/")) {
          console.log("[ë¡œê·¸ì¸] ê´€ë¦¬ì í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸:", decodedTarget);
          return decodedTarget;
        }
        
        if (!decodedTarget.startsWith("/")) {
          console.log("[ë¡œê·¸ì¸] ì˜ëª»ëœ ê²½ë¡œ, index.htmlë¡œ ì´ë™");
          return "index.html";
        }
        if (decodedTarget === "/login.html") {
          console.log("[ë¡œê·¸ì¸] login.html ìì²´, index.htmlë¡œ ì´ë™");
          return "index.html";
        }
        console.log("[ë¡œê·¸ì¸] ì¼ë°˜ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸:", decodedTarget);
        return decodedTarget;
      }

      // ì´ë¯¸ ë¡œê·¸ì¸ëœ ê²½ìš° ì§€ì •ëœ í˜ì´ì§€ë¡œ ì´ë™ (Supabase ì„¸ì…˜ ê¸°ë°˜)
      (async function checkAlreadyLoggedIn() {
        // Supabase ì´ˆê¸°í™” ëŒ€ê¸°
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        
        try {
          const { data: { session } } = await window.authState.supabase.auth.getSession();
          if (session) {
            window.location.replace(resolveRedirectTarget());
          }
        } catch (error) {
          console.error("ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:", error);
        }
      })();

      // Supabase ê°ì²´ ì°¸ì¡° (ì„œë²„ì—ì„œ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¨ auth-state.jsì—ì„œ ì´ˆê¸°í™”)
      let supabase = null;
      (async function initSupabase() {
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        supabase = window.authState.supabase;
      })();

      function setLoggedInFromSession(session) {
        if (!session) return;
        const user = session.user || {};
        const userData = {
          id: user.id || "",
          email: user.email || "",
          displayName: user.user_metadata?.full_name || user.user_metadata?.name || "",
          photoURL: user.user_metadata?.avatar_url || "",
          provider: (user.app_metadata?.provider || "kakao"),
          loginTime: new Date().toISOString(),
        };
        localStorage.setItem("userData", JSON.stringify(userData));
        localStorage.setItem("isLoggedIn", "true");
      }

      function redirectAfterLogin() {
        window.location.replace(resolveRedirectTarget());
      }

      // í˜ì´ì§€ ë¡œë“œ ì‹œ Supabase ì„¸ì…˜ í™•ì¸ ë° ìƒíƒœ ë³€í™” ê°ì§€
      (async () => {
        while (!window.authState?.supabase) {
          await new Promise(resolve => setTimeout(resolve, 100));
        }
        
        const supabaseClient = window.authState.supabase;
        
        try {
          // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì½œë°±ì¸ ê²½ìš° ë¡œë”© í‘œì‹œ
          const hashParams = new URLSearchParams(window.location.hash.slice(1));
          if (hashParams.has('access_token')) {
            showLoading();
          }
          
          const { data: { session } } = await supabaseClient.auth.getSession();
          if (session) {
            setLoggedInFromSession(session);
            redirectAfterLogin();
          } else {
            hideLoading();
          }
        } catch (error) {
          console.error('ì„¸ì…˜ í™•ì¸ ì˜¤ë¥˜:', error);
          hideLoading();
        }
        
        // ë¡œê·¸ì¸ ìƒíƒœ ë³€í™” ê°ì§€
        supabaseClient.auth.onAuthStateChange((event, session) => {
          console.log('Auth state changed:', event, session ? 'ì„¸ì…˜ ìˆìŒ' : 'ì„¸ì…˜ ì—†ìŒ');
          
          if (event === "SIGNED_IN" && session) {
            showLoading();
            setLoggedInFromSession(session);
            redirectAfterLogin();
          } else if (event === "SIGNED_OUT") {
            hideLoading();
          }
        });
      })();

      // DOM elements
      const errorMessage = document.getElementById("errorMessage");
      const successMessage = document.getElementById("successMessage");
      const loading = document.getElementById("loading");

      // Show error message
      function showError(message) {
        errorMessage.textContent = message;
        errorMessage.style.display = "block";
        successMessage.style.display = "none";
      }

      // Show success message
      function showSuccess(message) {
        successMessage.textContent = message;
        successMessage.style.display = "block";
        errorMessage.style.display = "none";
      }

      // Hide messages
      function hideMessages() {
        errorMessage.style.display = "none";
        successMessage.style.display = "none";
      }

      // Show loading
      function showLoading() {
        loading.style.display = "block";
      }

      // Hide loading
      function hideLoading() {
        loading.style.display = "none";
      }

      // Kakao ë¡œê·¸ì¸ (Supabase OAuth ë°©ì‹)
      const kakaoLoginBtn = document.getElementById("kakaoLogin");
      if (kakaoLoginBtn) {
        kakaoLoginBtn.addEventListener("click", async () => {
          try {
            showLoading();
            hideMessages();
            
            // Supabase ê°ì²´ ëŒ€ê¸°
            while (!supabase) {
              await new Promise(resolve => setTimeout(resolve, 100));
            }
            
            // redirect íŒŒë¼ë¯¸í„°ë¥¼ í¬í•¨í•œ ë¦¬ë‹¤ì´ë ‰íŠ¸ URL ìƒì„±
            let redirectUrl = window.location.origin + window.location.pathname;
            if (redirectTarget) {
              redirectUrl += '?redirect=' + encodeURIComponent(redirectTarget);
            }
            
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤...');
            console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] ë¦¬ë‹¤ì´ë ‰íŠ¸ URL:', redirectUrl);
            
            // Supabase OAuthë¥¼ ì‚¬ìš©í•œ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸
            // ì´ í•¨ìˆ˜ëŠ” ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ìë™ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë©ë‹ˆë‹¤
            const { data, error } = await supabase.auth.signInWithOAuth({
              provider: 'kakao',
              options: {
                redirectTo: redirectUrl,
                // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í‘œì‹œí•˜ë„ë¡ ì„¤ì •
                queryParams: {
                  prompt: 'login' // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ê°•ì œë¡œ í‘œì‹œ
                }
              }
            });

            if (error) {
              hideLoading();
              showError('ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message);
              console.error('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì˜¤ë¥˜:', error);
            } else {
              // ì„±ê³µ ì‹œ data.urlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ (ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€)
              if (data?.url) {
                console.log('[ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™:', data.url);
                // ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                window.location.href = data.url;
              }
            }
          } catch (err) {
            hideLoading();
            showError('ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            console.error('ë¡œê·¸ì¸ ì˜¤ë¥˜:', err);
          }
        });
      }
    </script>

    <!-- ì¶”ì  ë° ëª¨ë‹ˆí„°ë§ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="/assets/analytics.js"></script>
    <script src="/assets/error-logger.js"></script>
    <script src="/assets/performance-tracker.js"></script>
  </body>
</html>
