<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADLOG ìˆœìœ„ ì¶”ì  ëŒ€ì‹œë³´ë“œ | ì‚¬ì¥í”½ ê´€ë¦¬ì</title>
    
    <!-- CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../assets/admin-common.css">
    
    <style>
        .ranking-card {
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            transition: all 0.3s;
            height: 100%;
        }
        
        .ranking-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .rank-up {
            color: #27ae60;
            font-weight: bold;
        }
        
        .rank-down {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .rank-same {
            color: #95a5a6;
        }
        
        .top-restaurant {
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .rank-badge {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        
        .rank-1 { background: linear-gradient(135deg, #FFD700, #FFA500); }
        .rank-2 { background: linear-gradient(135deg, #C0C0C0, #95a5a6); }
        .rank-3 { background: linear-gradient(135deg, #CD7F32, #8B4513); }
        .rank-other { background: #6c757d; }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .keyword-tag {
            display: inline-block;
            padding: 5px 12px;
            margin: 5px;
            background: #e3f2fd;
            color: #1976d2;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 50px;
        }
        
        .data-table {
            font-size: 0.9rem;
        }
        
        .filter-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .status-badge {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .status-active {
            background: #d4edda;
            color: #155724;
        }
        
        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <!-- ì‚¬ì´ë“œë°” -->
    <div id="sidebar-container"></div>
    
    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="main-content">
        <!-- í—¤ë” -->
        <div class="content-header">
            <h1><i class="bi bi-graph-up"></i> ADLOG ìˆœìœ„ ì¶”ì  ëŒ€ì‹œë³´ë“œ</h1>
            <div class="header-actions">
                <button class="btn btn-success" onclick="runScraping()">
                    <i class="bi bi-arrow-clockwise"></i> ë°ì´í„° ìˆ˜ì§‘
                </button>
                <button class="btn btn-primary" onclick="exportData()">
                    <i class="bi bi-download"></i> ì—‘ì…€ ë‹¤ìš´ë¡œë“œ
                </button>
            </div>
        </div>
        
        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted">ì „ì²´ ì‹ë‹¹</h6>
                            <div class="stat-number" id="totalRestaurants">48</div>
                        </div>
                        <div class="text-primary">
                            <i class="bi bi-shop" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted">ì¶”ì  í‚¤ì›Œë“œ</h6>
                            <div class="stat-number" id="totalKeywords">26</div>
                        </div>
                        <div class="text-info">
                            <i class="bi bi-search" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted">ì˜¤ëŠ˜ ìˆ˜ì§‘</h6>
                            <div class="stat-number" id="todayData">520</div>
                        </div>
                        <div class="text-success">
                            <i class="bi bi-database" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-3">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</h6>
                            <div style="font-size: 1.2rem;" id="lastUpdate">14:34</div>
                        </div>
                        <div class="text-warning">
                            <i class="bi bi-clock-history" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- í•„í„° ì„¹ì…˜ -->
        <div class="filter-section">
            <div class="row">
                <div class="col-md-3">
                    <label class="form-label">í‚¤ì›Œë“œ ì„ íƒ</label>
                    <select class="form-select" id="keywordFilter">
                        <option value="">ì „ì²´</option>
                        <option value="ê°•ë‚¨ ë§›ì§‘">ê°•ë‚¨ ë§›ì§‘</option>
                        <option value="ê°•ë‚¨ ì¹˜í‚¨">ê°•ë‚¨ ì¹˜í‚¨</option>
                        <option value="í•´ìš´ëŒ€ ë§›ì§‘">í•´ìš´ëŒ€ ë§›ì§‘</option>
                        <option value="ì„œì´ˆ ë§›ì§‘">ì„œì´ˆ ë§›ì§‘</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">ì§€ì—­</label>
                    <select class="form-select" id="regionFilter">
                        <option value="">ì „ì²´</option>
                        <option value="ì„œìš¸">ì„œìš¸</option>
                        <option value="ë¶€ì‚°">ë¶€ì‚°</option>
                        <option value="ëŒ€ì „">ëŒ€ì „</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">ì¹´í…Œê³ ë¦¬</label>
                    <select class="form-select" id="categoryFilter">
                        <option value="">ì „ì²´</option>
                        <option value="í•œì‹">í•œì‹</option>
                        <option value="ì¹˜í‚¨">ì¹˜í‚¨</option>
                        <option value="ì¹´í˜">ì¹´í˜</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label class="form-label">&nbsp;</label>
                    <button class="btn btn-primary w-100" onclick="applyFilters()">
                        <i class="bi bi-funnel"></i> í•„í„° ì ìš©
                    </button>
                </div>
            </div>
        </div>
        
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <ul class="nav nav-tabs mb-4" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" href="#overview">
                    <i class="bi bi-speedometer2"></i> ê°œìš”
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#rankings">
                    <i class="bi bi-list-ol"></i> ìˆœìœ„ í˜„í™©
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#restaurants">
                    <i class="bi bi-shop"></i> ì‹ë‹¹ ê´€ë¦¬
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#keywords">
                    <i class="bi bi-tags"></i> í‚¤ì›Œë“œ ê´€ë¦¬
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" href="#analysis">
                    <i class="bi bi-graph-up-arrow"></i> ë¶„ì„
                </a>
            </li>
        </ul>
        
        <!-- íƒ­ ì½˜í…ì¸  -->
        <div class="tab-content">
            <!-- ê°œìš” íƒ­ -->
            <div class="tab-pane fade show active" id="overview">
                <div class="row">
                    <!-- TOP ìƒìŠ¹ ì‹ë‹¹ -->
                    <div class="col-md-6">
                        <div class="ranking-card p-4">
                            <h5 class="mb-3">ğŸš€ ì˜¤ëŠ˜ì˜ ê¸‰ìƒìŠ¹ ì‹ë‹¹</h5>
                            <div id="topGainers">
                                <div class="top-restaurant">
                                    <div class="d-flex align-items-center">
                                        <span class="rank-badge rank-1">1</span>
                                        <div class="ms-3">
                                            <strong>ìŠ¤ë¬´ê³ ê°œ í•´ìš´ëŒ€ì </strong>
                                            <div class="text-muted small">í•´ìš´ëŒ€ ë§›ì§‘</div>
                                        </div>
                                    </div>
                                    <span class="rank-up">â†‘15</span>
                                </div>
                                <div class="top-restaurant">
                                    <div class="d-flex align-items-center">
                                        <span class="rank-badge rank-2">2</span>
                                        <div class="ms-3">
                                            <strong>BBQì¹˜í‚¨ ê°•ë‚¨ì </strong>
                                            <div class="text-muted small">ê°•ë‚¨ ì¹˜í‚¨</div>
                                        </div>
                                    </div>
                                    <span class="rank-up">â†‘12</span>
                                </div>
                                <div class="top-restaurant">
                                    <div class="d-flex align-items-center">
                                        <span class="rank-badge rank-3">3</span>
                                        <div class="ms-3">
                                            <strong>ìŠ¤íƒ€ë²…ìŠ¤ ì„œë©´ì </strong>
                                            <div class="text-muted small">ì„œë©´ ì¹´í˜</div>
                                        </div>
                                    </div>
                                    <span class="rank-up">â†‘8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- TOP í•˜ë½ ì‹ë‹¹ -->
                    <div class="col-md-6">
                        <div class="ranking-card p-4">
                            <h5 class="mb-3">ğŸ“‰ ìˆœìœ„ í•˜ë½ ì£¼ì˜</h5>
                            <div id="topLosers">
                                <div class="top-restaurant">
                                    <div class="d-flex align-items-center">
                                        <span class="rank-badge rank-other">1</span>
                                        <div class="ms-3">
                                            <strong>êµì´Œì¹˜í‚¨ í•´ìš´ëŒ€ì </strong>
                                            <div class="text-muted small">í•´ìš´ëŒ€ ì¹˜í‚¨</div>
                                        </div>
                                    </div>
                                    <span class="rank-down">â†“10</span>
                                </div>
                                <div class="top-restaurant">
                                    <div class="d-flex align-items-center">
                                        <span class="rank-badge rank-other">2</span>
                                        <div class="ms-3">
                                            <strong>ì´ë””ì•¼ì»¤í”¼ ê°•ë‚¨ì—­ì </strong>
                                            <div class="text-muted small">ê°•ë‚¨ ì¹´í˜</div>
                                        </div>
                                    </div>
                                    <span class="rank-down">â†“8</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ì°¨íŠ¸ ì˜ì—­ -->
                <div class="row mt-4">
                    <div class="col-md-12">
                        <div class="ranking-card p-4">
                            <h5 class="mb-3">ğŸ“ˆ ì£¼ê°„ ìˆœìœ„ ë³€ë™ ì¶”ì´</h5>
                            <div class="chart-container">
                                <canvas id="rankingChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ìˆœìœ„ í˜„í™© íƒ­ -->
            <div class="tab-pane fade" id="rankings">
                <div class="ranking-card p-4">
                    <h5 class="mb-3">ì‹¤ì‹œê°„ ìˆœìœ„ í˜„í™©</h5>
                    <div class="table-responsive">
                        <table class="table data-table">
                            <thead>
                                <tr>
                                    <th>ìˆœìœ„</th>
                                    <th>ì‹ë‹¹ëª…</th>
                                    <th>í‚¤ì›Œë“œ</th>
                                    <th>ì¹´í…Œê³ ë¦¬</th>
                                    <th>ë³€ë™</th>
                                    <th>ìµœê·¼ ì—…ë°ì´íŠ¸</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="rankingsTable">
                                <!-- ë™ì  ë¡œë“œ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- ì‹ë‹¹ ê´€ë¦¬ íƒ­ -->
            <div class="tab-pane fade" id="restaurants">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5>ë“±ë¡ëœ ì‹ë‹¹ ëª©ë¡</h5>
                        <button class="btn btn-success btn-sm" onclick="addRestaurant()">
                            <i class="bi bi-plus-circle"></i> ì‹ë‹¹ ì¶”ê°€
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="table data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>ì‹ë‹¹ëª…</th>
                                    <th>ì¹´í…Œê³ ë¦¬</th>
                                    <th>ì£¼ì†Œ</th>
                                    <th>ìƒíƒœ</th>
                                    <th>ë„¤ì´ë²„ URL</th>
                                    <th>ì‘ì—…</th>
                                </tr>
                            </thead>
                            <tbody id="restaurantsTable">
                                <!-- ë™ì  ë¡œë“œ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- í‚¤ì›Œë“œ ê´€ë¦¬ íƒ­ -->
            <div class="tab-pane fade" id="keywords">
                <div class="ranking-card p-4">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h5>ì¶”ì  í‚¤ì›Œë“œ ëª©ë¡</h5>
                        <button class="btn btn-success btn-sm" onclick="addKeyword()">
                            <i class="bi bi-plus-circle"></i> í‚¤ì›Œë“œ ì¶”ê°€
                        </button>
                    </div>
                    <div class="row">
                        <div class="col-md-8">
                            <div class="table-responsive">
                                <table class="table data-table">
                                    <thead>
                                        <tr>
                                            <th>í‚¤ì›Œë“œ</th>
                                            <th>ì¹´í…Œê³ ë¦¬</th>
                                            <th>ìš°ì„ ìˆœìœ„</th>
                                            <th>ê²€ìƒ‰ íšŸìˆ˜</th>
                                            <th>ë§ˆì§€ë§‰ ê²€ìƒ‰</th>
                                            <th>ìƒíƒœ</th>
                                            <th>ì‘ì—…</th>
                                        </tr>
                                    </thead>
                                    <tbody id="keywordsTable">
                                        <!-- ë™ì  ë¡œë“œ -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h6>í™œì„± í‚¤ì›Œë“œ</h6>
                            <div id="activeKeywords">
                                <span class="keyword-tag">ê°•ë‚¨ ë§›ì§‘</span>
                                <span class="keyword-tag">í•´ìš´ëŒ€ ë§›ì§‘</span>
                                <span class="keyword-tag">ê°•ë‚¨ ì¹˜í‚¨</span>
                                <span class="keyword-tag">ì„œì´ˆ ë§›ì§‘</span>
                                <span class="keyword-tag">ì†¡íŒŒ ë§›ì§‘</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ë¶„ì„ íƒ­ -->
            <div class="tab-pane fade" id="analysis">
                <div class="row">
                    <div class="col-md-6">
                        <div class="ranking-card p-4">
                            <h5>ì§€ì—­ë³„ ë¶„í¬</h5>
                            <canvas id="regionChart"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="ranking-card p-4">
                            <h5>ì¹´í…Œê³ ë¦¬ë³„ ë¶„í¬</h5>
                            <canvas id="categoryChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
        <div class="loading-spinner" id="loadingSpinner">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>
    </main>
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="../assets/admin-common.js"></script>
    
    <script>
        // Supabase ì´ˆê¸°í™”
        const SUPABASE_URL = localStorage.getItem('SUPABASE_URL');
        const SUPABASE_KEY = localStorage.getItem('SUPABASE_ANON_KEY');
        const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', async () => {
            await loadDashboardData();
            initCharts();
            loadRestaurants();
            loadKeywords();
        });
        
        // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
        async function loadDashboardData() {
            try {
                // ì „ì²´ ì‹ë‹¹ ìˆ˜
                const { count: restaurantCount } = await supabase
                    .from('adlog_restaurants')
                    .select('*', { count: 'exact', head: true });
                document.getElementById('totalRestaurants').textContent = restaurantCount || 48;
                
                // í‚¤ì›Œë“œ ìˆ˜
                const { count: keywordCount } = await supabase
                    .from('tracking_keywords')
                    .select('*', { count: 'exact', head: true })
                    .eq('is_active', true);
                document.getElementById('totalKeywords').textContent = keywordCount || 26;
                
                // ì˜¤ëŠ˜ ë°ì´í„°
                const today = new Date().toISOString().split('T')[0];
                const { count: todayCount } = await supabase
                    .from('daily_rankings')
                    .select('*', { count: 'exact', head: true })
                    .eq('search_date', today);
                document.getElementById('todayData').textContent = todayCount || 0;
                
                // ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸
                const now = new Date();
                document.getElementById('lastUpdate').textContent = 
                    `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                
            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì‹ë‹¹ ëª©ë¡ ë¡œë“œ
        async function loadRestaurants() {
            try {
                const { data, error } = await supabase
                    .from('adlog_restaurants')
                    .select('*')
                    .order('created_at', { ascending: false })
                    .limit(50);
                
                if (error) throw error;
                
                const tbody = document.getElementById('restaurantsTable');
                tbody.innerHTML = '';
                
                data.forEach(restaurant => {
                    const row = `
                        <tr>
                            <td>${restaurant.place_id}</td>
                            <td><strong>${restaurant.place_name || 'ë¯¸ë“±ë¡'}</strong></td>
                            <td>${restaurant.category || '-'}</td>
                            <td>${restaurant.address || '-'}</td>
                            <td>
                                <span class="status-badge ${restaurant.is_active ? 'status-active' : 'status-inactive'}">
                                    ${restaurant.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}
                                </span>
                            </td>
                            <td>
                                <a href="${restaurant.place_url}" target="_blank" class="btn btn-sm btn-outline-primary">
                                    <i class="bi bi-box-arrow-up-right"></i>
                                </a>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-warning" onclick="editRestaurant('${restaurant.id}')">
                                    <i class="bi bi-pencil"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                    tbody.innerHTML += row;
                });
                
            } catch (error) {
                console.error('ì‹ë‹¹ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }
        
        // í‚¤ì›Œë“œ ëª©ë¡ ë¡œë“œ
        async function loadKeywords() {
            try {
                const { data, error } = await supabase
                    .from('tracking_keywords')
                    .select('*')
                    .order('priority', { ascending: true });
                
                if (error) throw error;
                
                const tbody = document.getElementById('keywordsTable');
                tbody.innerHTML = '';
                
                data.forEach(keyword => {
                    const row = `
                        <tr>
                            <td><strong>${keyword.keyword}</strong></td>
                            <td>${keyword.category || '-'}</td>
                            <td>${keyword.priority}</td>
                            <td>${keyword.total_searches || 0}</td>
                            <td>${keyword.last_searched_at ? new Date(keyword.last_searched_at).toLocaleString('ko-KR') : '-'}</td>
                            <td>
                                <span class="status-badge ${keyword.is_active ? 'status-active' : 'status-inactive'}">
                                    ${keyword.is_active ? 'í™œì„±' : 'ë¹„í™œì„±'}
                                </span>
                            </td>
                            <td>
                                <button class="btn btn-sm btn-info" onclick="searchKeyword('${keyword.keyword}')">
                                    <i class="bi bi-search"></i>
                                </button>
                            </td>
                        </tr>
                    `;
                    tbody.innerHTML += row;
                });
                
            } catch (error) {
                console.error('í‚¤ì›Œë“œ ë¡œë“œ ì˜¤ë¥˜:', error);
            }
        }
        
        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initCharts() {
            // ìˆœìœ„ ë³€ë™ ì°¨íŠ¸
            const ctx = document.getElementById('rankingChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'],
                    datasets: [{
                        label: 'ìŠ¤ë¬´ê³ ê°œ í•´ìš´ëŒ€ì ',
                        data: [15, 12, 8, 10, 7, 5, 3],
                        borderColor: 'rgb(75, 192, 192)',
                        tension: 0.1
                    }, {
                        label: 'BBQì¹˜í‚¨ ê°•ë‚¨ì ',
                        data: [20, 18, 15, 14, 12, 10, 8],
                        borderColor: 'rgb(255, 99, 132)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            reverse: true,
                            title: {
                                display: true,
                                text: 'ìˆœìœ„'
                            }
                        }
                    }
                }
            });
        }
        
        // ë°ì´í„° ìˆ˜ì§‘ ì‹¤í–‰
        async function runScraping() {
            if (confirm('ë°ì´í„° ìˆ˜ì§‘ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì•½ 2-3ë¶„ ì†Œìš”ë©ë‹ˆë‹¤.')) {
                document.getElementById('loadingSpinner').style.display = 'block';
                
                try {
                    // Python ìŠ¤í¬ë˜í¼ ì‹¤í–‰ API í˜¸ì¶œ
                    const response = await fetch('/api/admin/run-scraping', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${localStorage.getItem('adminToken')}`
                        }
                    });
                    
                    if (response.ok) {
                        alert('ë°ì´í„° ìˆ˜ì§‘ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
                        location.reload();
                    } else {
                        alert('ë°ì´í„° ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                    }
                } catch (error) {
                    console.error('ìˆ˜ì§‘ ì˜¤ë¥˜:', error);
                    alert('ë°ì´í„° ìˆ˜ì§‘ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                } finally {
                    document.getElementById('loadingSpinner').style.display = 'none';
                }
            }
        }
        
        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        function exportData() {
            alert('ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.');
        }
        
        // í•„í„° ì ìš©
        function applyFilters() {
            const keyword = document.getElementById('keywordFilter').value;
            const region = document.getElementById('regionFilter').value;
            const category = document.getElementById('categoryFilter').value;
            
            console.log('í•„í„° ì ìš©:', { keyword, region, category });
            // í•„í„°ë§ ë¡œì§ êµ¬í˜„
        }
    </script>
</body>
</html>
